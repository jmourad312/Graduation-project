{"ast":null,"code":"import { __assign, __extends, __rest } from 'tslib';\nimport React__default, { PureComponent, createContext, createElement, forwardRef, Component, cloneElement, Children } from 'react';\nimport poseFactory from 'popmotion-pose';\nimport isValidProp from '@emotion/is-prop-valid';\nimport { invariant, warning } from 'hey-listen';\n\nvar hasChanged = function (prev, next) {\n  if (prev === next) return false;\n  var prevIsArray = Array.isArray(prev);\n  var nextIsArray = Array.isArray(next);\n\n  if (prevIsArray !== nextIsArray || !prevIsArray && !nextIsArray) {\n    return true;\n  } else if (prevIsArray && nextIsArray) {\n    var numPrev = prev.length;\n    var numNext = next.length;\n    if (numPrev !== numNext) return true;\n\n    for (var i = 0; i < numPrev; i++) {\n      if (prev[i] !== next[i]) return true;\n    }\n  }\n\n  return false;\n};\n\nvar pickAssign = function (shouldPick, sources) {\n  return sources.reduce(function (picked, source) {\n    for (var key in source) {\n      if (shouldPick(key)) {\n        picked[key] = source[key];\n      }\n    }\n\n    return picked;\n  }, {});\n};\n\nvar _a = createContext({}),\n    PoseParentConsumer = _a.Consumer,\n    PoseParentProvider = _a.Provider;\n\nvar calcPopFromFlowStyle = function (el) {\n  var offsetTop = el.offsetTop,\n      offsetLeft = el.offsetLeft,\n      offsetWidth = el.offsetWidth,\n      offsetHeight = el.offsetHeight;\n  return {\n    position: 'absolute',\n    top: offsetTop,\n    left: offsetLeft,\n    width: offsetWidth,\n    height: offsetHeight\n  };\n};\n\nvar hasPose = function (pose, key) {\n  return Array.isArray(pose) ? pose.indexOf(key) !== -1 : pose === key;\n};\n\nvar objectToMap = function (obj) {\n  return Object.keys(obj).reduce(function (map, key) {\n    map.set(key, {\n      raw: obj[key]\n    });\n    return map;\n  }, new Map());\n};\n\nvar testAlwaysTrue = function () {\n  return true;\n};\n\nvar filterProps = function (_a) {\n  var elementType = _a.elementType,\n      poseConfig = _a.poseConfig,\n      onValueChange = _a.onValueChange,\n      innerRef = _a.innerRef,\n      _pose = _a._pose,\n      pose = _a.pose,\n      initialPose = _a.initialPose,\n      poseKey = _a.poseKey,\n      onPoseComplete = _a.onPoseComplete,\n      getParentPoseConfig = _a.getParentPoseConfig,\n      registerChild = _a.registerChild,\n      onUnmount = _a.onUnmount,\n      getInitialPoseFromParent = _a.getInitialPoseFromParent,\n      popFromFlow = _a.popFromFlow,\n      values = _a.values,\n      parentValues = _a.parentValues,\n      onDragStart = _a.onDragStart,\n      onDragEnd = _a.onDragEnd,\n      onPressStart = _a.onPressStart,\n      onPressEnd = _a.onPressEnd,\n      props = __rest(_a, [\"elementType\", \"poseConfig\", \"onValueChange\", \"innerRef\", \"_pose\", \"pose\", \"initialPose\", \"poseKey\", \"onPoseComplete\", \"getParentPoseConfig\", \"registerChild\", \"onUnmount\", \"getInitialPoseFromParent\", \"popFromFlow\", \"values\", \"parentValues\", \"onDragStart\", \"onDragEnd\", \"onPressStart\", \"onPressEnd\"]);\n\n  return props;\n};\n\nvar PoseElement = function (_super) {\n  __extends(PoseElement, _super);\n\n  function PoseElement(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.children = new Set();\n    _this.childrenHandlers = {\n      registerChild: function (props) {\n        _this.children.add(props);\n\n        if (_this.poser) _this.flushChildren();\n      },\n      onUnmount: function (child) {\n        return _this.poser.removeChild(child);\n      },\n      getParentPoseConfig: function () {\n        return _this.poseConfig;\n      },\n      getInitialPoseFromParent: function () {\n        return _this.getInitialPose();\n      }\n    };\n\n    _this.setRef = function (ref) {\n      warning(ref === null || ref instanceof Element && _this.ref === undefined, 'ref must be provided to the same DOM component for the entire lifecycle of a posed component.');\n      _this.ref = ref;\n      var innerRef = _this.props.innerRef;\n      if (!innerRef) return;\n\n      if (typeof innerRef === 'function') {\n        innerRef(ref);\n      } else {\n        innerRef.current = ref;\n      }\n    };\n\n    _this.shouldForwardProp = typeof _this.props.elementType === 'string' ? isValidProp : testAlwaysTrue;\n    var poseConfig = _this.props.poseConfig;\n    _this.poseConfig = typeof poseConfig === 'function' ? poseConfig(filterProps(props)) : poseConfig;\n    return _this;\n  }\n\n  PoseElement.prototype.getInitialPose = function () {\n    var _a = this.props,\n        getInitialPoseFromParent = _a.getInitialPoseFromParent,\n        pose = _a.pose,\n        _pose = _a._pose,\n        initialPose = _a.initialPose;\n\n    if (initialPose) {\n      return initialPose;\n    } else {\n      var parentPose = getInitialPoseFromParent && getInitialPoseFromParent();\n      var initialPoses = (Array.isArray(parentPose) ? parentPose : [parentPose]).concat(pose, _pose).filter(Boolean);\n      return initialPoses.length > 0 ? initialPoses : undefined;\n    }\n  };\n\n  PoseElement.prototype.getFirstPose = function () {\n    var _a = this.props,\n        initialPose = _a.initialPose,\n        pose = _a.pose,\n        _pose = _a._pose;\n    if (!initialPose) return;\n    var firstPose = (Array.isArray(pose) ? pose : [pose]).concat(_pose).filter(Boolean);\n    return firstPose.length === 1 ? firstPose[0] : firstPose;\n  };\n\n  PoseElement.prototype.getSetProps = function () {\n    var props = filterProps(this.props);\n\n    if (this.props.popFromFlow && this.ref && this.ref instanceof HTMLElement) {\n      if (!this.popStyle) {\n        props.style = __assign(__assign({}, props.style), calcPopFromFlowStyle(this.ref));\n        this.popStyle = props.style;\n      } else {\n        props.style = this.popStyle;\n      }\n    } else {\n      this.popStyle = null;\n    }\n\n    return props;\n  };\n\n  PoseElement.prototype.componentDidMount = function () {\n    var _this = this;\n\n    invariant(this.ref instanceof Element, \"No valid DOM ref found. If you're converting an existing component via posed(Component), you must ensure you're passing the ref to the host DOM node via the React.forwardRef function.\");\n    var _a = this.props,\n        onValueChange = _a.onValueChange,\n        registerChild = _a.registerChild,\n        values = _a.values,\n        parentValues = _a.parentValues,\n        onDragStart = _a.onDragStart,\n        onDragEnd = _a.onDragEnd,\n        onPressStart = _a.onPressStart,\n        onPressEnd = _a.onPressEnd;\n\n    var config = __assign(__assign({}, this.poseConfig), {\n      initialPose: this.getInitialPose(),\n      values: values || this.poseConfig.values,\n      parentValues: parentValues ? objectToMap(parentValues) : undefined,\n      props: this.getSetProps(),\n      onDragStart: onDragStart,\n      onDragEnd: onDragEnd,\n      onPressStart: onPressStart,\n      onPressEnd: onPressEnd,\n      onChange: onValueChange\n    });\n\n    if (!registerChild) {\n      this.initPoser(poseFactory(this.ref, config));\n    } else {\n      registerChild({\n        element: this.ref,\n        poseConfig: config,\n        onRegistered: function (poser) {\n          return _this.initPoser(poser);\n        }\n      });\n    }\n  };\n\n  PoseElement.prototype.getSnapshotBeforeUpdate = function () {\n    var _a = this.props,\n        pose = _a.pose,\n        _pose = _a._pose;\n    if (hasPose(pose, 'flip') || hasPose(_pose, 'flip')) this.poser.measure();\n    return null;\n  };\n\n  PoseElement.prototype.componentDidUpdate = function (prevProps) {\n    var _a = this.props,\n        pose = _a.pose,\n        _pose = _a._pose,\n        poseKey = _a.poseKey;\n    this.poser.setProps(this.getSetProps());\n\n    if (poseKey !== prevProps.poseKey || hasChanged(prevProps.pose, pose) || pose === 'flip') {\n      this.setPose(pose);\n    }\n\n    if (_pose !== prevProps._pose || _pose === 'flip') this.setPose(_pose);\n  };\n\n  PoseElement.prototype.componentWillUnmount = function () {\n    if (!this.poser) return;\n    var onUnmount = this.props.onUnmount;\n    if (onUnmount) onUnmount(this.poser);\n    this.poser.destroy();\n  };\n\n  PoseElement.prototype.initPoser = function (poser) {\n    this.poser = poser;\n    this.flushChildren();\n    var firstPose = this.getFirstPose();\n    if (firstPose) this.setPose(firstPose);\n  };\n\n  PoseElement.prototype.setPose = function (pose) {\n    var _this = this;\n\n    var onPoseComplete = this.props.onPoseComplete;\n    var poseList = Array.isArray(pose) ? pose : [pose];\n    Promise.all(poseList.map(function (key) {\n      return key && _this.poser.set(key);\n    })).then(function () {\n      return onPoseComplete && onPoseComplete(pose);\n    });\n  };\n\n  PoseElement.prototype.flushChildren = function () {\n    var _this = this;\n\n    this.children.forEach(function (_a) {\n      var element = _a.element,\n          poseConfig = _a.poseConfig,\n          onRegistered = _a.onRegistered;\n      return onRegistered(_this.poser.addChild(element, poseConfig));\n    });\n    this.children.clear();\n  };\n\n  PoseElement.prototype.render = function () {\n    var elementType = this.props.elementType;\n    return React__default.createElement(PoseParentProvider, {\n      value: this.childrenHandlers\n    }, createElement(elementType, pickAssign(this.shouldForwardProp, [this.getSetProps(), {\n      ref: this.setRef\n    }])));\n  };\n\n  return PoseElement;\n}(PureComponent);\n\nvar supportedElements = ['a', 'article', 'aside', 'audio', 'b', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'cite', 'code', 'col', 'colgroup', 'data', 'datalist', 'dialog', 'div', 'em', 'embed', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'i', 'iframe', 'img', 'input', 'label', 'legend', 'li', 'nav', 'object', 'ol', 'option', 'p', 'param', 'picture', 'pre', 'progress', 'q', 'section', 'select', 'span', 'strong', 'table', 'tbody', 'td', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'ul', 'video', 'circle', 'clipPath', 'defs', 'ellipse', 'g', 'image', 'line', 'linearGradient', 'mask', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect', 'stop', 'svg', 'text', 'tspan'];\nvar componentCache = new Map();\n\nvar createComponentFactory = function (key) {\n  var componentFactory = function (poseConfig) {\n    if (poseConfig === void 0) {\n      poseConfig = {};\n    }\n\n    return forwardRef(function (_a, ref) {\n      var _b = _a.withParent,\n          withParent = _b === void 0 ? true : _b,\n          props = __rest(_a, [\"withParent\"]);\n\n      warning(props.innerRef === undefined, 'innerRef is deprecated. Please use ref instead.');\n      return !withParent || props.parentValues ? React__default.createElement(PoseElement, __assign({\n        poseConfig: poseConfig,\n        innerRef: ref,\n        elementType: key\n      }, props)) : React__default.createElement(PoseParentConsumer, null, function (parentCtx) {\n        return React__default.createElement(PoseElement, __assign({\n          poseConfig: poseConfig,\n          elementType: key,\n          innerRef: ref\n        }, props, parentCtx));\n      });\n    });\n  };\n\n  componentCache.set(key, componentFactory);\n  return componentFactory;\n};\n\nvar getComponentFactory = function (key) {\n  return componentCache.has(key) ? componentCache.get(key) : createComponentFactory(key);\n};\n\nvar posed = function (component) {\n  return getComponentFactory(component);\n};\n\nsupportedElements.reduce(function (acc, key) {\n  acc[key] = createComponentFactory(key);\n  return acc;\n}, posed);\n\nvar getKey = function (child) {\n  invariant(child && child.key !== null, 'Every child of Transition must be given a unique key');\n  var childKey = typeof child.key === 'number' ? child.key.toString() : child.key;\n  return childKey.replace('.$', '');\n};\n\nvar prependProps = function (element, props) {\n  return createElement(element.type, __assign(__assign({\n    key: element.key,\n    ref: element.ref\n  }, props), element.props));\n};\n\nvar handleTransition = function (_a, _b) {\n  var displayedChildren = _b.displayedChildren,\n      finishedLeaving = _b.finishedLeaving,\n      hasInitialized = _b.hasInitialized,\n      indexedChildren = _b.indexedChildren,\n      scheduleChildRemoval = _b.scheduleChildRemoval;\n\n  var incomingChildren = _a.children,\n      preEnterPose = _a.preEnterPose,\n      enterPose = _a.enterPose,\n      exitPose = _a.exitPose,\n      animateOnMount = _a.animateOnMount,\n      enterAfterExit = _a.enterAfterExit,\n      flipMove = _a.flipMove,\n      onRest = _a.onRest,\n      propsForChildren = __rest(_a, [\"children\", \"preEnterPose\", \"enterPose\", \"exitPose\", \"animateOnMount\", \"enterAfterExit\", \"flipMove\", \"onRest\"]);\n\n  var targetChildren = makeChildList(incomingChildren);\n  var nextState = {\n    displayedChildren: []\n  };\n\n  if (process.env.NODE_ENV !== 'production') {\n    warning(!propsForChildren.onPoseComplete, \"<Transition/> (or <PoseGroup/>) doesn't accept onPoseComplete prop.\");\n  }\n\n  var prevKeys = displayedChildren.map(getKey);\n  var nextKeys = targetChildren.map(getKey);\n  var hasPropsForChildren = Object.keys(propsForChildren).length !== 0;\n  var entering = new Set(nextKeys.filter(function (key) {\n    return finishedLeaving.hasOwnProperty(key) || prevKeys.indexOf(key) === -1;\n  }));\n  entering.forEach(function (key) {\n    return delete finishedLeaving[key];\n  });\n  var leaving = [];\n  var newlyLeaving = {};\n  prevKeys.forEach(function (key) {\n    if (entering.has(key)) {\n      return;\n    }\n\n    var isLeaving = finishedLeaving.hasOwnProperty(key);\n\n    if (!isLeaving && nextKeys.indexOf(key) !== -1) {\n      return;\n    }\n\n    leaving.push(key);\n\n    if (!isLeaving) {\n      finishedLeaving[key] = false;\n      newlyLeaving[key] = true;\n    }\n  });\n  var moving = new Set(prevKeys.filter(function (key, i) {\n    return !entering.has(key) || leaving.indexOf(key) === -1;\n  }));\n  targetChildren.forEach(function (child) {\n    var newChildProps = {};\n\n    if (entering.has(child.key)) {\n      if (hasInitialized || animateOnMount) {\n        newChildProps.initialPose = preEnterPose;\n      }\n\n      newChildProps._pose = enterPose;\n    } else if (moving.has(child.key) && flipMove) {\n      newChildProps._pose = [enterPose, 'flip'];\n    } else {\n      newChildProps._pose = enterPose;\n    }\n\n    var newChild = cloneElement(child, newChildProps);\n    indexedChildren[child.key] = newChild;\n    nextState.displayedChildren.push(hasPropsForChildren ? prependProps(newChild, propsForChildren) : newChild);\n  });\n  leaving.forEach(function (key) {\n    var child = indexedChildren[key];\n    var newChild = newlyLeaving[key] ? cloneElement(child, {\n      _pose: exitPose,\n      onPoseComplete: function (pose) {\n        if (pose === exitPose) scheduleChildRemoval(key);\n        var onPoseComplete = child.props.onPoseComplete;\n        if (onPoseComplete) onPoseComplete(pose);\n      },\n      popFromFlow: flipMove\n    }) : child;\n    var insertionIndex = prevKeys.indexOf(key);\n    indexedChildren[child.key] = newChild;\n    nextState.displayedChildren.splice(insertionIndex, 0, hasPropsForChildren ? prependProps(newChild, propsForChildren) : newChild);\n  });\n  return nextState;\n};\n\nvar handleChildrenTransitions = function (props, state) {\n  var newState = handleTransition(props, state);\n  newState.hasInitialized = true;\n  return newState;\n};\n\nvar makeChildList = function (children) {\n  var list = [];\n  Children.forEach(children, function (child) {\n    return child && list.push(child);\n  });\n  return list;\n};\n\nvar Transition = function (_super) {\n  __extends(Transition, _super);\n\n  function Transition() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      displayedChildren: [],\n      finishedLeaving: {},\n      hasInitialized: false,\n      indexedChildren: {},\n      scheduleChildRemoval: function (key) {\n        return _this.removeChild(key);\n      }\n    };\n    return _this;\n  }\n\n  Transition.prototype.removeChild = function (key) {\n    var _a = this.state,\n        displayedChildren = _a.displayedChildren,\n        finishedLeaving = _a.finishedLeaving;\n    var _b = this.props,\n        enterAfterExit = _b.enterAfterExit,\n        onRest = _b.onRest;\n    if (!finishedLeaving.hasOwnProperty(key)) return;\n    finishedLeaving[key] = true;\n\n    if (!Object.keys(finishedLeaving).every(function (leavingKey) {\n      return finishedLeaving[leavingKey];\n    })) {\n      return;\n    }\n\n    var targetChildren = displayedChildren.filter(function (child) {\n      return !finishedLeaving.hasOwnProperty(child.key);\n    });\n    var newState = enterAfterExit ? __assign({\n      finishedLeaving: {}\n    }, handleChildrenTransitions(__assign(__assign({}, this.props), {\n      enterAfterExit: false\n    }), __assign(__assign({}, this.state), {\n      displayedChildren: targetChildren\n    }))) : {\n      finishedLeaving: {},\n      displayedChildren: targetChildren\n    };\n    this.setState(newState, onRest);\n  };\n\n  Transition.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n    return this.state !== nextState;\n  };\n\n  Transition.prototype.render = function () {\n    return this.state.displayedChildren;\n  };\n\n  Transition.defaultProps = {\n    flipMove: false,\n    enterAfterExit: false,\n    preEnterPose: 'exit',\n    enterPose: 'enter',\n    exitPose: 'exit'\n  };\n  Transition.getDerivedStateFromProps = handleChildrenTransitions;\n  return Transition;\n}(Component);\n\nvar PoseGroup = function (_super) {\n  __extends(PoseGroup, _super);\n\n  function PoseGroup() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  PoseGroup.prototype.render = function () {\n    return createElement(Transition, __assign({}, this.props));\n  };\n\n  PoseGroup.defaultProps = {\n    flipMove: true\n  };\n  return PoseGroup;\n}(Component);\n\nexport default posed;\nexport { Transition, PoseGroup };","map":{"version":3,"sources":["D:/J0E/Programming/ITI-Graduation-Project/CarReact/car-react/node_modules/react-pose/dist/react-pose.es.js"],"names":["__assign","__extends","__rest","React__default","PureComponent","createContext","createElement","forwardRef","Component","cloneElement","Children","poseFactory","isValidProp","invariant","warning","hasChanged","prev","next","prevIsArray","Array","isArray","nextIsArray","numPrev","length","numNext","i","pickAssign","shouldPick","sources","reduce","picked","source","key","_a","PoseParentConsumer","Consumer","PoseParentProvider","Provider","calcPopFromFlowStyle","el","offsetTop","offsetLeft","offsetWidth","offsetHeight","position","top","left","width","height","hasPose","pose","indexOf","objectToMap","obj","Object","keys","map","set","raw","Map","testAlwaysTrue","filterProps","elementType","poseConfig","onValueChange","innerRef","_pose","initialPose","poseKey","onPoseComplete","getParentPoseConfig","registerChild","onUnmount","getInitialPoseFromParent","popFromFlow","values","parentValues","onDragStart","onDragEnd","onPressStart","onPressEnd","props","PoseElement","_super","_this","call","children","Set","childrenHandlers","add","poser","flushChildren","child","removeChild","getInitialPose","setRef","ref","Element","undefined","current","shouldForwardProp","prototype","parentPose","initialPoses","concat","filter","Boolean","getFirstPose","firstPose","getSetProps","HTMLElement","popStyle","style","componentDidMount","config","onChange","initPoser","element","onRegistered","getSnapshotBeforeUpdate","measure","componentDidUpdate","prevProps","setProps","setPose","componentWillUnmount","destroy","poseList","Promise","all","then","forEach","addChild","clear","render","value","supportedElements","componentCache","createComponentFactory","componentFactory","_b","withParent","parentCtx","getComponentFactory","has","get","posed","component","acc","getKey","childKey","toString","replace","prependProps","type","handleTransition","displayedChildren","finishedLeaving","hasInitialized","indexedChildren","scheduleChildRemoval","incomingChildren","preEnterPose","enterPose","exitPose","animateOnMount","enterAfterExit","flipMove","onRest","propsForChildren","targetChildren","makeChildList","nextState","process","env","NODE_ENV","prevKeys","nextKeys","hasPropsForChildren","entering","hasOwnProperty","leaving","newlyLeaving","isLeaving","push","moving","newChildProps","newChild","insertionIndex","splice","handleChildrenTransitions","state","newState","list","Transition","apply","arguments","every","leavingKey","setState","shouldComponentUpdate","nextProps","defaultProps","getDerivedStateFromProps","PoseGroup"],"mappings":"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","sourcesContent":["import { __assign, __extends, __rest } from 'tslib';\nimport React__default, { PureComponent, createContext, createElement, forwardRef, Component, cloneElement, Children } from 'react';\nimport poseFactory from 'popmotion-pose';\nimport isValidProp from '@emotion/is-prop-valid';\nimport { invariant, warning } from 'hey-listen';\n\nvar hasChanged = function (prev, next) {\r\n    if (prev === next)\r\n        return false;\r\n    var prevIsArray = Array.isArray(prev);\r\n    var nextIsArray = Array.isArray(next);\r\n    if (prevIsArray !== nextIsArray || (!prevIsArray && !nextIsArray)) {\r\n        return true;\r\n    }\r\n    else if (prevIsArray && nextIsArray) {\r\n        var numPrev = prev.length;\r\n        var numNext = next.length;\r\n        if (numPrev !== numNext)\r\n            return true;\r\n        for (var i = 0; i < numPrev; i++) {\r\n            if (prev[i] !== next[i])\r\n                return true;\r\n        }\r\n    }\r\n    return false;\r\n};\n\nvar pickAssign = function (shouldPick, sources) {\r\n    return sources.reduce(function (picked, source) {\r\n        for (var key in source) {\r\n            if (shouldPick(key)) {\r\n                picked[key] = source[key];\r\n            }\r\n        }\r\n        return picked;\r\n    }, {});\r\n};\n\nvar _a = createContext({}), PoseParentConsumer = _a.Consumer, PoseParentProvider = _a.Provider;\r\nvar calcPopFromFlowStyle = function (el) {\r\n    var offsetTop = el.offsetTop, offsetLeft = el.offsetLeft, offsetWidth = el.offsetWidth, offsetHeight = el.offsetHeight;\r\n    return {\r\n        position: 'absolute',\r\n        top: offsetTop,\r\n        left: offsetLeft,\r\n        width: offsetWidth,\r\n        height: offsetHeight\r\n    };\r\n};\r\nvar hasPose = function (pose, key) {\r\n    return Array.isArray(pose) ? pose.indexOf(key) !== -1 : pose === key;\r\n};\r\nvar objectToMap = function (obj) {\r\n    return Object.keys(obj).reduce(function (map, key) {\r\n        map.set(key, { raw: obj[key] });\r\n        return map;\r\n    }, new Map());\r\n};\r\nvar testAlwaysTrue = function () { return true; };\r\nvar filterProps = function (_a) {\r\n    var elementType = _a.elementType, poseConfig = _a.poseConfig, onValueChange = _a.onValueChange, innerRef = _a.innerRef, _pose = _a._pose, pose = _a.pose, initialPose = _a.initialPose, poseKey = _a.poseKey, onPoseComplete = _a.onPoseComplete, getParentPoseConfig = _a.getParentPoseConfig, registerChild = _a.registerChild, onUnmount = _a.onUnmount, getInitialPoseFromParent = _a.getInitialPoseFromParent, popFromFlow = _a.popFromFlow, values = _a.values, parentValues = _a.parentValues, onDragStart = _a.onDragStart, onDragEnd = _a.onDragEnd, onPressStart = _a.onPressStart, onPressEnd = _a.onPressEnd, props = __rest(_a, [\"elementType\", \"poseConfig\", \"onValueChange\", \"innerRef\", \"_pose\", \"pose\", \"initialPose\", \"poseKey\", \"onPoseComplete\", \"getParentPoseConfig\", \"registerChild\", \"onUnmount\", \"getInitialPoseFromParent\", \"popFromFlow\", \"values\", \"parentValues\", \"onDragStart\", \"onDragEnd\", \"onPressStart\", \"onPressEnd\"]);\r\n    return props;\r\n};\r\nvar PoseElement = (function (_super) {\r\n    __extends(PoseElement, _super);\r\n    function PoseElement(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.children = new Set();\r\n        _this.childrenHandlers = {\r\n            registerChild: function (props) {\r\n                _this.children.add(props);\r\n                if (_this.poser)\r\n                    _this.flushChildren();\r\n            },\r\n            onUnmount: function (child) { return _this.poser.removeChild(child); },\r\n            getParentPoseConfig: function () { return _this.poseConfig; },\r\n            getInitialPoseFromParent: function () { return _this.getInitialPose(); }\r\n        };\r\n        _this.setRef = function (ref) {\r\n            warning(ref === null || (ref instanceof Element && _this.ref === undefined), 'ref must be provided to the same DOM component for the entire lifecycle of a posed component.');\r\n            _this.ref = ref;\r\n            var innerRef = _this.props.innerRef;\r\n            if (!innerRef)\r\n                return;\r\n            if (typeof innerRef === 'function') {\r\n                innerRef(ref);\r\n            }\r\n            else {\r\n                innerRef.current = ref;\r\n            }\r\n        };\r\n        _this.shouldForwardProp =\r\n            typeof _this.props.elementType === 'string' ? isValidProp : testAlwaysTrue;\r\n        var poseConfig = _this.props.poseConfig;\r\n        _this.poseConfig =\r\n            typeof poseConfig === 'function'\r\n                ? poseConfig(filterProps(props))\r\n                : poseConfig;\r\n        return _this;\r\n    }\r\n    PoseElement.prototype.getInitialPose = function () {\r\n        var _a = this.props, getInitialPoseFromParent = _a.getInitialPoseFromParent, pose = _a.pose, _pose = _a._pose, initialPose = _a.initialPose;\r\n        if (initialPose) {\r\n            return initialPose;\r\n        }\r\n        else {\r\n            var parentPose = getInitialPoseFromParent && getInitialPoseFromParent();\r\n            var initialPoses = (Array.isArray(parentPose)\r\n                ? parentPose\r\n                : [parentPose])\r\n                .concat(pose, _pose)\r\n                .filter(Boolean);\r\n            return initialPoses.length > 0 ? initialPoses : undefined;\r\n        }\r\n    };\r\n    PoseElement.prototype.getFirstPose = function () {\r\n        var _a = this.props, initialPose = _a.initialPose, pose = _a.pose, _pose = _a._pose;\r\n        if (!initialPose)\r\n            return;\r\n        var firstPose = (Array.isArray(pose) ? pose : [pose])\r\n            .concat(_pose)\r\n            .filter(Boolean);\r\n        return firstPose.length === 1 ? firstPose[0] : firstPose;\r\n    };\r\n    PoseElement.prototype.getSetProps = function () {\r\n        var props = filterProps(this.props);\r\n        if (this.props.popFromFlow && this.ref && this.ref instanceof HTMLElement) {\r\n            if (!this.popStyle) {\r\n                props.style = __assign(__assign({}, props.style), calcPopFromFlowStyle(this.ref));\r\n                this.popStyle = props.style;\r\n            }\r\n            else {\r\n                props.style = this.popStyle;\r\n            }\r\n        }\r\n        else {\r\n            this.popStyle = null;\r\n        }\r\n        return props;\r\n    };\r\n    PoseElement.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        invariant(this.ref instanceof Element, \"No valid DOM ref found. If you're converting an existing component via posed(Component), you must ensure you're passing the ref to the host DOM node via the React.forwardRef function.\");\r\n        var _a = this.props, onValueChange = _a.onValueChange, registerChild = _a.registerChild, values = _a.values, parentValues = _a.parentValues, onDragStart = _a.onDragStart, onDragEnd = _a.onDragEnd, onPressStart = _a.onPressStart, onPressEnd = _a.onPressEnd;\r\n        var config = __assign(__assign({}, this.poseConfig), { initialPose: this.getInitialPose(), values: values || this.poseConfig.values, parentValues: parentValues ? objectToMap(parentValues) : undefined, props: this.getSetProps(), onDragStart: onDragStart,\r\n            onDragEnd: onDragEnd,\r\n            onPressStart: onPressStart,\r\n            onPressEnd: onPressEnd, onChange: onValueChange });\r\n        if (!registerChild) {\r\n            this.initPoser(poseFactory(this.ref, config));\r\n        }\r\n        else {\r\n            registerChild({\r\n                element: this.ref,\r\n                poseConfig: config,\r\n                onRegistered: function (poser) { return _this.initPoser(poser); }\r\n            });\r\n        }\r\n    };\r\n    PoseElement.prototype.getSnapshotBeforeUpdate = function () {\r\n        var _a = this.props, pose = _a.pose, _pose = _a._pose;\r\n        if (hasPose(pose, 'flip') || hasPose(_pose, 'flip'))\r\n            this.poser.measure();\r\n        return null;\r\n    };\r\n    PoseElement.prototype.componentDidUpdate = function (prevProps) {\r\n        var _a = this.props, pose = _a.pose, _pose = _a._pose, poseKey = _a.poseKey;\r\n        this.poser.setProps(this.getSetProps());\r\n        if (poseKey !== prevProps.poseKey ||\r\n            hasChanged(prevProps.pose, pose) ||\r\n            pose === 'flip') {\r\n            this.setPose(pose);\r\n        }\r\n        if (_pose !== prevProps._pose || _pose === 'flip')\r\n            this.setPose(_pose);\r\n    };\r\n    PoseElement.prototype.componentWillUnmount = function () {\r\n        if (!this.poser)\r\n            return;\r\n        var onUnmount = this.props.onUnmount;\r\n        if (onUnmount)\r\n            onUnmount(this.poser);\r\n        this.poser.destroy();\r\n    };\r\n    PoseElement.prototype.initPoser = function (poser) {\r\n        this.poser = poser;\r\n        this.flushChildren();\r\n        var firstPose = this.getFirstPose();\r\n        if (firstPose)\r\n            this.setPose(firstPose);\r\n    };\r\n    PoseElement.prototype.setPose = function (pose) {\r\n        var _this = this;\r\n        var onPoseComplete = this.props.onPoseComplete;\r\n        var poseList = Array.isArray(pose) ? pose : [pose];\r\n        Promise.all(poseList.map(function (key) { return key && _this.poser.set(key); })).then(function () { return onPoseComplete && onPoseComplete(pose); });\r\n    };\r\n    PoseElement.prototype.flushChildren = function () {\r\n        var _this = this;\r\n        this.children.forEach(function (_a) {\r\n            var element = _a.element, poseConfig = _a.poseConfig, onRegistered = _a.onRegistered;\r\n            return onRegistered(_this.poser.addChild(element, poseConfig));\r\n        });\r\n        this.children.clear();\r\n    };\r\n    PoseElement.prototype.render = function () {\r\n        var elementType = this.props.elementType;\r\n        return (React__default.createElement(PoseParentProvider, { value: this.childrenHandlers }, createElement(elementType, pickAssign(this.shouldForwardProp, [\r\n            this.getSetProps(),\r\n            { ref: this.setRef }\r\n        ]))));\r\n    };\r\n    return PoseElement;\r\n}(PureComponent));\n\nvar supportedElements = [\r\n    'a',\r\n    'article',\r\n    'aside',\r\n    'audio',\r\n    'b',\r\n    'blockquote',\r\n    'body',\r\n    'br',\r\n    'button',\r\n    'canvas',\r\n    'caption',\r\n    'cite',\r\n    'code',\r\n    'col',\r\n    'colgroup',\r\n    'data',\r\n    'datalist',\r\n    'dialog',\r\n    'div',\r\n    'em',\r\n    'embed',\r\n    'fieldset',\r\n    'figcaption',\r\n    'figure',\r\n    'footer',\r\n    'form',\r\n    'h1',\r\n    'h2',\r\n    'h3',\r\n    'h4',\r\n    'h5',\r\n    'h6',\r\n    'head',\r\n    'header',\r\n    'hgroup',\r\n    'hr',\r\n    'i',\r\n    'iframe',\r\n    'img',\r\n    'input',\r\n    'label',\r\n    'legend',\r\n    'li',\r\n    'nav',\r\n    'object',\r\n    'ol',\r\n    'option',\r\n    'p',\r\n    'param',\r\n    'picture',\r\n    'pre',\r\n    'progress',\r\n    'q',\r\n    'section',\r\n    'select',\r\n    'span',\r\n    'strong',\r\n    'table',\r\n    'tbody',\r\n    'td',\r\n    'textarea',\r\n    'tfoot',\r\n    'th',\r\n    'thead',\r\n    'time',\r\n    'title',\r\n    'tr',\r\n    'ul',\r\n    'video',\r\n    'circle',\r\n    'clipPath',\r\n    'defs',\r\n    'ellipse',\r\n    'g',\r\n    'image',\r\n    'line',\r\n    'linearGradient',\r\n    'mask',\r\n    'path',\r\n    'pattern',\r\n    'polygon',\r\n    'polyline',\r\n    'radialGradient',\r\n    'rect',\r\n    'stop',\r\n    'svg',\r\n    'text',\r\n    'tspan'\r\n];\n\nvar componentCache = new Map();\r\nvar createComponentFactory = function (key) {\r\n    var componentFactory = function (poseConfig) {\r\n        if (poseConfig === void 0) { poseConfig = {}; }\r\n        return forwardRef(function (_a, ref) {\r\n            var _b = _a.withParent, withParent = _b === void 0 ? true : _b, props = __rest(_a, [\"withParent\"]);\r\n            warning(props.innerRef === undefined, 'innerRef is deprecated. Please use ref instead.');\r\n            return !withParent || props.parentValues ? (React__default.createElement(PoseElement, __assign({ poseConfig: poseConfig, innerRef: ref, elementType: key }, props))) : (React__default.createElement(PoseParentConsumer, null, function (parentCtx) { return (React__default.createElement(PoseElement, __assign({ poseConfig: poseConfig, elementType: key, innerRef: ref }, props, parentCtx))); }));\r\n        });\r\n    };\r\n    componentCache.set(key, componentFactory);\r\n    return componentFactory;\r\n};\r\nvar getComponentFactory = function (key) {\r\n    return componentCache.has(key)\r\n        ? componentCache.get(key)\r\n        : createComponentFactory(key);\r\n};\r\nvar posed = (function (component) {\r\n    return getComponentFactory(component);\r\n});\r\nsupportedElements.reduce(function (acc, key) {\r\n    acc[key] = createComponentFactory(key);\r\n    return acc;\r\n}, posed);\n\nvar getKey = function (child) {\r\n    invariant(child && child.key !== null, 'Every child of Transition must be given a unique key');\r\n    var childKey = typeof child.key === 'number' ? child.key.toString() : child.key;\r\n    return childKey.replace('.$', '');\r\n};\r\nvar prependProps = function (element, props) {\r\n    return createElement(element.type, __assign(__assign({ key: element.key, ref: element.ref }, props), element.props));\r\n};\r\nvar handleTransition = function (_a, _b) {\r\n    var displayedChildren = _b.displayedChildren, finishedLeaving = _b.finishedLeaving, hasInitialized = _b.hasInitialized, indexedChildren = _b.indexedChildren, scheduleChildRemoval = _b.scheduleChildRemoval;\r\n    var incomingChildren = _a.children, preEnterPose = _a.preEnterPose, enterPose = _a.enterPose, exitPose = _a.exitPose, animateOnMount = _a.animateOnMount, enterAfterExit = _a.enterAfterExit, flipMove = _a.flipMove, onRest = _a.onRest, propsForChildren = __rest(_a, [\"children\", \"preEnterPose\", \"enterPose\", \"exitPose\", \"animateOnMount\", \"enterAfterExit\", \"flipMove\", \"onRest\"]);\r\n    var targetChildren = makeChildList(incomingChildren);\r\n    var nextState = {\r\n        displayedChildren: []\r\n    };\r\n    if (process.env.NODE_ENV !== 'production') {\r\n        warning(!propsForChildren.onPoseComplete, \"<Transition/> (or <PoseGroup/>) doesn't accept onPoseComplete prop.\");\r\n    }\r\n    var prevKeys = displayedChildren.map(getKey);\r\n    var nextKeys = targetChildren.map(getKey);\r\n    var hasPropsForChildren = Object.keys(propsForChildren).length !== 0;\r\n    var entering = new Set(nextKeys.filter(function (key) { return finishedLeaving.hasOwnProperty(key) || prevKeys.indexOf(key) === -1; }));\r\n    entering.forEach(function (key) { return delete finishedLeaving[key]; });\r\n    var leaving = [];\r\n    var newlyLeaving = {};\r\n    prevKeys.forEach(function (key) {\r\n        if (entering.has(key)) {\r\n            return;\r\n        }\r\n        var isLeaving = finishedLeaving.hasOwnProperty(key);\r\n        if (!isLeaving && nextKeys.indexOf(key) !== -1) {\r\n            return;\r\n        }\r\n        leaving.push(key);\r\n        if (!isLeaving) {\r\n            finishedLeaving[key] = false;\r\n            newlyLeaving[key] = true;\r\n        }\r\n    });\r\n    var moving = new Set(prevKeys.filter(function (key, i) {\r\n        return !entering.has(key) || leaving.indexOf(key) === -1;\r\n    }));\r\n    targetChildren.forEach(function (child) {\r\n        var newChildProps = {};\r\n        if (entering.has(child.key)) {\r\n            if (hasInitialized || animateOnMount) {\r\n                newChildProps.initialPose = preEnterPose;\r\n            }\r\n            newChildProps._pose = enterPose;\r\n        }\r\n        else if (moving.has(child.key) && flipMove) {\r\n            newChildProps._pose = [enterPose, 'flip'];\r\n        }\r\n        else {\r\n            newChildProps._pose = enterPose;\r\n        }\r\n        var newChild = cloneElement(child, newChildProps);\r\n        indexedChildren[child.key] = newChild;\r\n        nextState.displayedChildren.push(hasPropsForChildren ? prependProps(newChild, propsForChildren) : newChild);\r\n    });\r\n    leaving.forEach(function (key) {\r\n        var child = indexedChildren[key];\r\n        var newChild = newlyLeaving[key]\r\n            ? cloneElement(child, {\r\n                _pose: exitPose,\r\n                onPoseComplete: function (pose) {\r\n                    if (pose === exitPose)\r\n                        scheduleChildRemoval(key);\r\n                    var onPoseComplete = child.props.onPoseComplete;\r\n                    if (onPoseComplete)\r\n                        onPoseComplete(pose);\r\n                },\r\n                popFromFlow: flipMove\r\n            })\r\n            : child;\r\n        var insertionIndex = prevKeys.indexOf(key);\r\n        indexedChildren[child.key] = newChild;\r\n        nextState.displayedChildren.splice(insertionIndex, 0, hasPropsForChildren ? prependProps(newChild, propsForChildren) : newChild);\r\n    });\r\n    return nextState;\r\n};\r\nvar handleChildrenTransitions = (function (props, state) {\r\n    var newState = handleTransition(props, state);\r\n    newState.hasInitialized = true;\r\n    return newState;\r\n});\r\nvar makeChildList = function (children) {\r\n    var list = [];\r\n    Children.forEach(children, function (child) { return child && list.push(child); });\r\n    return list;\r\n};\n\nvar Transition = (function (_super) {\r\n    __extends(Transition, _super);\r\n    function Transition() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            displayedChildren: [],\r\n            finishedLeaving: {},\r\n            hasInitialized: false,\r\n            indexedChildren: {},\r\n            scheduleChildRemoval: function (key) { return _this.removeChild(key); }\r\n        };\r\n        return _this;\r\n    }\r\n    Transition.prototype.removeChild = function (key) {\r\n        var _a = this.state, displayedChildren = _a.displayedChildren, finishedLeaving = _a.finishedLeaving;\r\n        var _b = this.props, enterAfterExit = _b.enterAfterExit, onRest = _b.onRest;\r\n        if (!finishedLeaving.hasOwnProperty(key))\r\n            return;\r\n        finishedLeaving[key] = true;\r\n        if (!Object.keys(finishedLeaving).every(function (leavingKey) { return finishedLeaving[leavingKey]; })) {\r\n            return;\r\n        }\r\n        var targetChildren = displayedChildren.filter(function (child) { return !finishedLeaving.hasOwnProperty(child.key); });\r\n        var newState = enterAfterExit\r\n            ? __assign({ finishedLeaving: {} }, handleChildrenTransitions(__assign(__assign({}, this.props), { enterAfterExit: false }), __assign(__assign({}, this.state), { displayedChildren: targetChildren }))) : {\r\n            finishedLeaving: {},\r\n            displayedChildren: targetChildren\r\n        };\r\n        this.setState(newState, onRest);\r\n    };\r\n    Transition.prototype.shouldComponentUpdate = function (nextProps, nextState) {\r\n        return this.state !== nextState;\r\n    };\r\n    Transition.prototype.render = function () {\r\n        return this.state.displayedChildren;\r\n    };\r\n    Transition.defaultProps = {\r\n        flipMove: false,\r\n        enterAfterExit: false,\r\n        preEnterPose: 'exit',\r\n        enterPose: 'enter',\r\n        exitPose: 'exit'\r\n    };\r\n    Transition.getDerivedStateFromProps = handleChildrenTransitions;\r\n    return Transition;\r\n}(Component));\n\nvar PoseGroup = (function (_super) {\r\n    __extends(PoseGroup, _super);\r\n    function PoseGroup() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    PoseGroup.prototype.render = function () {\r\n        return createElement(Transition, __assign({}, this.props));\r\n    };\r\n    PoseGroup.defaultProps = {\r\n        flipMove: true\r\n    };\r\n    return PoseGroup;\r\n}(Component));\n\nexport default posed;\nexport { Transition, PoseGroup };\n"]},"metadata":{},"sourceType":"module"}