{"ast":null,"code":"import { __assign, __spreadArrays, __extends, __rest } from 'tslib';\nimport { pipe, angle, degreesToRadians, distance, isPoint3D, isPoint, mix, pointFromVector, progress, radiansToDegrees, smoothFrame, velocityPerFrame, velocityPerSecond, mixComplex, mixColor, clamp, applyOffset, conditional, interpolate, mixArray, smooth, snap, springForce, springForceExpo, springForceLinear, wrap } from '@popmotion/popcorn';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport { color, complex, px, percent, degrees, vh, vw, number } from 'style-value-types';\nimport * as styleValueTypes from 'style-value-types';\nexport { styleValueTypes as valueTypes };\nimport { createReversedEasing, linear, easeOut, easeInOut } from '@popmotion/easing';\nimport * as easing from '@popmotion/easing';\nexport { easing };\nimport styler from 'stylefire';\nexport { default as styler } from 'stylefire';\nimport { warning } from 'hey-listen';\n\nvar Chainable = /*#__PURE__*/function () {\n  function Chainable(props) {\n    if (props === void 0) {\n      props = {};\n    }\n\n    this.props = props;\n  }\n\n  Chainable.prototype.applyMiddleware = function (middleware) {\n    return this.create(__assign(__assign({}, this.props), {\n      middleware: this.props.middleware ? __spreadArrays([middleware], this.props.middleware) : [middleware]\n    }));\n  };\n\n  Chainable.prototype.pipe = function () {\n    var funcs = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      funcs[_i] = arguments[_i];\n    }\n\n    var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n    return this.applyMiddleware(function (update) {\n      return function (v) {\n        return update(pipedUpdate(v));\n      };\n    });\n  };\n\n  Chainable.prototype.while = function (predicate) {\n    return this.applyMiddleware(function (update, complete) {\n      return function (v) {\n        return predicate(v) ? update(v) : complete();\n      };\n    });\n  };\n\n  Chainable.prototype.filter = function (predicate) {\n    return this.applyMiddleware(function (update) {\n      return function (v) {\n        return predicate(v) && update(v);\n      };\n    });\n  };\n\n  return Chainable;\n}();\n\nvar Observer = /*#__PURE__*/function () {\n  function Observer(_a, observer) {\n    var _this = this;\n\n    var middleware = _a.middleware,\n        onComplete = _a.onComplete;\n    this.isActive = true;\n\n    this.update = function (v) {\n      if (_this.observer.update) _this.updateObserver(v);\n    };\n\n    this.complete = function () {\n      if (_this.observer.complete && _this.isActive) _this.observer.complete();\n      if (_this.onComplete) _this.onComplete();\n      _this.isActive = false;\n    };\n\n    this.error = function (err) {\n      if (_this.observer.error && _this.isActive) _this.observer.error(err);\n      _this.isActive = false;\n    };\n\n    this.observer = observer;\n\n    this.updateObserver = function (v) {\n      return observer.update(v);\n    };\n\n    this.onComplete = onComplete;\n\n    if (observer.update && middleware && middleware.length) {\n      middleware.forEach(function (m) {\n        return _this.updateObserver = m(_this.updateObserver, _this.complete);\n      });\n    }\n  }\n\n  return Observer;\n}();\n\nvar createObserver = function (observerCandidate, _a, onComplete) {\n  var middleware = _a.middleware;\n\n  if (typeof observerCandidate === 'function') {\n    return new Observer({\n      middleware: middleware,\n      onComplete: onComplete\n    }, {\n      update: observerCandidate\n    });\n  } else {\n    return new Observer({\n      middleware: middleware,\n      onComplete: onComplete\n    }, observerCandidate);\n  }\n};\n\nvar Action = /*#__PURE__*/function (_super) {\n  __extends(Action, _super);\n\n  function Action() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Action.prototype.create = function (props) {\n    return new Action(props);\n  };\n\n  Action.prototype.start = function (observerCandidate) {\n    if (observerCandidate === void 0) {\n      observerCandidate = {};\n    }\n\n    var isComplete = false;\n    var subscription = {\n      stop: function () {\n        return undefined;\n      }\n    };\n\n    var _a = this.props,\n        init = _a.init,\n        observerProps = __rest(_a, [\"init\"]);\n\n    var observer = createObserver(observerCandidate, observerProps, function () {\n      isComplete = true;\n      subscription.stop();\n    });\n    var api = init(observer);\n    subscription = api ? __assign(__assign({}, subscription), api) : subscription;\n\n    if (observerCandidate.registerParent) {\n      observerCandidate.registerParent(subscription);\n    }\n\n    if (isComplete) subscription.stop();\n    return subscription;\n  };\n\n  return Action;\n}(Chainable);\n\nvar action = function (init) {\n  return new Action({\n    init: init\n  });\n};\n\nvar BaseMulticast = /*#__PURE__*/function (_super) {\n  __extends(BaseMulticast, _super);\n\n  function BaseMulticast() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.subscribers = [];\n    return _this;\n  }\n\n  BaseMulticast.prototype.complete = function () {\n    this.subscribers.forEach(function (subscriber) {\n      return subscriber.complete();\n    });\n  };\n\n  BaseMulticast.prototype.error = function (err) {\n    this.subscribers.forEach(function (subscriber) {\n      return subscriber.error(err);\n    });\n  };\n\n  BaseMulticast.prototype.update = function (v) {\n    for (var i = 0; i < this.subscribers.length; i++) {\n      this.subscribers[i].update(v);\n    }\n  };\n\n  BaseMulticast.prototype.subscribe = function (observerCandidate) {\n    var _this = this;\n\n    var observer = createObserver(observerCandidate, this.props);\n    this.subscribers.push(observer);\n    var subscription = {\n      unsubscribe: function () {\n        var index = _this.subscribers.indexOf(observer);\n\n        if (index !== -1) _this.subscribers.splice(index, 1);\n      }\n    };\n    return subscription;\n  };\n\n  BaseMulticast.prototype.stop = function () {\n    if (this.parent) this.parent.stop();\n  };\n\n  BaseMulticast.prototype.registerParent = function (subscription) {\n    this.stop();\n    this.parent = subscription;\n  };\n\n  return BaseMulticast;\n}(Chainable);\n\nvar Multicast = /*#__PURE__*/function (_super) {\n  __extends(Multicast, _super);\n\n  function Multicast() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Multicast.prototype.create = function (props) {\n    return new Multicast(props);\n  };\n\n  return Multicast;\n}(BaseMulticast);\n\nvar multicast = function () {\n  return new Multicast();\n};\n\nvar stepProgress = function (steps, progress) {\n  var segment = 1 / (steps - 1);\n  var subsegment = 1 / (2 * (steps - 1));\n  var percentProgressOfTarget = Math.min(progress, 1);\n  var subsegmentProgressOfTarget = percentProgressOfTarget / subsegment;\n  var segmentProgressOfTarget = Math.floor((subsegmentProgressOfTarget + 1) / 2);\n  return segmentProgressOfTarget * segment;\n};\n\nvar calc = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  angle: angle,\n  degreesToRadians: degreesToRadians,\n  distance: distance,\n  isPoint3D: isPoint3D,\n  isPoint: isPoint,\n  dilate: mix,\n  getValueFromProgress: mix,\n  pointFromAngleAndDistance: pointFromVector,\n  getProgressFromValue: progress,\n  radiansToDegrees: radiansToDegrees,\n  smooth: smoothFrame,\n  speedPerFrame: velocityPerFrame,\n  speedPerSecond: velocityPerSecond,\n  stepProgress: stepProgress\n});\n\nvar isValueList = function (v) {\n  return Array.isArray(v);\n};\n\nvar isSingleValue = function (v) {\n  var typeOfV = typeof v;\n  return typeOfV === 'string' || typeOfV === 'number';\n};\n\nvar ValueReaction = /*#__PURE__*/function (_super) {\n  __extends(ValueReaction, _super);\n\n  function ValueReaction(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.scheduleVelocityCheck = function () {\n      return sync.postRender(_this.velocityCheck);\n    };\n\n    _this.velocityCheck = function (_a) {\n      var timestamp = _a.timestamp;\n\n      if (timestamp !== _this.lastUpdated) {\n        _this.prev = _this.current;\n      }\n    };\n\n    _this.prev = _this.current = props.value || 0;\n\n    if (isSingleValue(_this.current)) {\n      _this.updateCurrent = function (v) {\n        return _this.current = v;\n      };\n\n      _this.getVelocityOfCurrent = function () {\n        return _this.getSingleVelocity(_this.current, _this.prev);\n      };\n    } else if (isValueList(_this.current)) {\n      _this.updateCurrent = function (v) {\n        return _this.current = __spreadArrays(v);\n      };\n\n      _this.getVelocityOfCurrent = function () {\n        return _this.getListVelocity();\n      };\n    } else {\n      _this.updateCurrent = function (v) {\n        _this.current = {};\n\n        for (var key in v) {\n          if (v.hasOwnProperty(key)) {\n            _this.current[key] = v[key];\n          }\n        }\n      };\n\n      _this.getVelocityOfCurrent = function () {\n        return _this.getMapVelocity();\n      };\n    }\n\n    if (props.initialSubscription) _this.subscribe(props.initialSubscription);\n    return _this;\n  }\n\n  ValueReaction.prototype.create = function (props) {\n    return new ValueReaction(props);\n  };\n\n  ValueReaction.prototype.get = function () {\n    return this.current;\n  };\n\n  ValueReaction.prototype.getVelocity = function () {\n    return this.getVelocityOfCurrent();\n  };\n\n  ValueReaction.prototype.update = function (v) {\n    _super.prototype.update.call(this, v);\n\n    this.prev = this.current;\n    this.updateCurrent(v);\n\n    var _a = getFrameData(),\n        delta = _a.delta,\n        timestamp = _a.timestamp;\n\n    this.timeDelta = delta;\n    this.lastUpdated = timestamp;\n    sync.postRender(this.scheduleVelocityCheck);\n  };\n\n  ValueReaction.prototype.subscribe = function (observerCandidate) {\n    var sub = _super.prototype.subscribe.call(this, observerCandidate);\n\n    this.subscribers[this.subscribers.length - 1].update(this.current);\n    return sub;\n  };\n\n  ValueReaction.prototype.getSingleVelocity = function (current, prev) {\n    return typeof current === 'number' && typeof prev === 'number' ? velocityPerSecond(current - prev, this.timeDelta) : velocityPerSecond(parseFloat(current) - parseFloat(prev), this.timeDelta) || 0;\n  };\n\n  ValueReaction.prototype.getListVelocity = function () {\n    var _this = this;\n\n    return this.current.map(function (c, i) {\n      return _this.getSingleVelocity(c, _this.prev[i]);\n    });\n  };\n\n  ValueReaction.prototype.getMapVelocity = function () {\n    var velocity = {};\n\n    for (var key in this.current) {\n      if (this.current.hasOwnProperty(key)) {\n        velocity[key] = this.getSingleVelocity(this.current[key], this.prev[key]);\n      }\n    }\n\n    return velocity;\n  };\n\n  return ValueReaction;\n}(BaseMulticast);\n\nvar value = function (value, initialSubscription) {\n  return new ValueReaction({\n    value: value,\n    initialSubscription: initialSubscription\n  });\n};\n\nvar multi = function (_a) {\n  var getCount = _a.getCount,\n      getFirst = _a.getFirst,\n      getOutput = _a.getOutput,\n      mapApi = _a.mapApi,\n      setProp = _a.setProp,\n      startActions = _a.startActions;\n  return function (actions) {\n    return action(function (_a) {\n      var update = _a.update,\n          complete = _a.complete,\n          error = _a.error;\n      var numActions = getCount(actions);\n      var output = getOutput();\n\n      var updateOutput = function () {\n        return update(output);\n      };\n\n      var numCompletedActions = 0;\n      var subs = startActions(actions, function (a, name) {\n        var hasCompleted = false;\n        return a.start({\n          complete: function () {\n            if (!hasCompleted) {\n              hasCompleted = true;\n              numCompletedActions++;\n              if (numCompletedActions === numActions) sync.update(complete);\n            }\n          },\n          error: error,\n          update: function (v) {\n            setProp(output, name, v);\n            sync.update(updateOutput, false, true);\n          }\n        });\n      });\n      return Object.keys(getFirst(subs)).reduce(function (api, methodName) {\n        api[methodName] = mapApi(subs, methodName);\n        return api;\n      }, {});\n    });\n  };\n};\n\nvar composite = /*#__PURE__*/multi({\n  getOutput: function () {\n    return {};\n  },\n  getCount: function (subs) {\n    return Object.keys(subs).length;\n  },\n  getFirst: function (subs) {\n    return subs[Object.keys(subs)[0]];\n  },\n  mapApi: function (subs, methodName) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return Object.keys(subs).reduce(function (output, propKey) {\n        var _a;\n\n        if (subs[propKey][methodName]) {\n          args[0] && args[0][propKey] !== undefined ? output[propKey] = subs[propKey][methodName](args[0][propKey]) : output[propKey] = (_a = subs[propKey])[methodName].apply(_a, args);\n        }\n\n        return output;\n      }, {});\n    };\n  },\n  setProp: function (output, name, v) {\n    return output[name] = v;\n  },\n  startActions: function (actions, starter) {\n    return Object.keys(actions).reduce(function (subs, key) {\n      subs[key] = starter(actions[key], key);\n      return subs;\n    }, {});\n  }\n});\nvar parallel = /*#__PURE__*/multi({\n  getOutput: function () {\n    return [];\n  },\n  getCount: function (subs) {\n    return subs.length;\n  },\n  getFirst: function (subs) {\n    return subs[0];\n  },\n  mapApi: function (subs, methodName) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return subs.map(function (sub, i) {\n        if (sub[methodName]) {\n          return Array.isArray(args[0]) ? sub[methodName](args[0][i]) : sub[methodName].apply(sub, args);\n        }\n      });\n    };\n  },\n  setProp: function (output, name, v) {\n    return output[name] = v;\n  },\n  startActions: function (actions, starter) {\n    return actions.map(function (action, i) {\n      return starter(action, i);\n    });\n  }\n});\n\nvar parallel$1 = function () {\n  var actions = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    actions[_i] = arguments[_i];\n  }\n\n  return parallel(actions);\n};\n\nvar createVectorTests = function (typeTests) {\n  var testNames = Object.keys(typeTests);\n\n  var isVectorProp = function (prop, key) {\n    return prop !== undefined && !typeTests[key](prop);\n  };\n\n  var getVectorKeys = function (props) {\n    return testNames.reduce(function (vectorKeys, key) {\n      if (isVectorProp(props[key], key)) vectorKeys.push(key);\n      return vectorKeys;\n    }, []);\n  };\n\n  var testVectorProps = function (props) {\n    return props && testNames.some(function (key) {\n      return isVectorProp(props[key], key);\n    });\n  };\n\n  return {\n    getVectorKeys: getVectorKeys,\n    testVectorProps: testVectorProps\n  };\n};\n\nvar unitTypes = [px, percent, degrees, vh, vw];\n\nvar findUnitType = function (prop) {\n  return unitTypes.find(function (type) {\n    return type.test(prop);\n  });\n};\n\nvar isUnitProp = function (prop) {\n  return Boolean(findUnitType(prop));\n};\n\nvar createAction = function (action, props) {\n  return action(props);\n};\n\nvar reduceArrayValue = function (i) {\n  return function (props, key) {\n    props[key] = props[key][i];\n    return props;\n  };\n};\n\nvar createArrayAction = function (action, props, vectorKeys) {\n  var firstVectorKey = vectorKeys[0];\n  var actionList = props[firstVectorKey].map(function (v, i) {\n    var childActionProps = vectorKeys.reduce(reduceArrayValue(i), __assign({}, props));\n    return getActionCreator(v)(action, childActionProps);\n  });\n  return parallel$1.apply(void 0, actionList);\n};\n\nvar reduceObjectValue = function (key) {\n  return function (props, propKey) {\n    props[propKey] = props[propKey][key];\n    return props;\n  };\n};\n\nvar createObjectAction = function (action, props, vectorKeys) {\n  var firstVectorKey = vectorKeys[0];\n  var actionMap = Object.keys(props[firstVectorKey]).reduce(function (map, key) {\n    var childActionProps = vectorKeys.reduce(reduceObjectValue(key), __assign({}, props));\n    map[key] = getActionCreator(props[firstVectorKey][key])(action, childActionProps);\n    return map;\n  }, {});\n  return composite(actionMap);\n};\n\nvar createUnitAction = function (action, _a) {\n  var from = _a.from,\n      to = _a.to,\n      props = __rest(_a, [\"from\", \"to\"]);\n\n  var unitType = findUnitType(from) || findUnitType(to);\n  var transform = unitType.transform,\n      parse = unitType.parse;\n  return action(__assign(__assign({}, props), {\n    from: typeof from === 'string' ? parse(from) : from,\n    to: typeof to === 'string' ? parse(to) : to\n  })).pipe(transform);\n};\n\nvar createMixerAction = function (mixer) {\n  return function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n\n    return action(__assign(__assign({}, props), {\n      from: 0,\n      to: 1\n    })).pipe(mixer(from, to));\n  };\n};\n\nvar createColorAction = /*#__PURE__*/createMixerAction(mixColor);\nvar createComplexAction = /*#__PURE__*/createMixerAction(mixComplex);\n\nvar createVectorAction = function (action, typeTests) {\n  var _a = createVectorTests(typeTests),\n      testVectorProps = _a.testVectorProps,\n      getVectorKeys = _a.getVectorKeys;\n\n  var vectorAction = function (props) {\n    var isVector = testVectorProps(props);\n    if (!isVector) return action(props);\n    var vectorKeys = getVectorKeys(props);\n    var testKey = vectorKeys[0];\n    var testProp = props[testKey];\n    return getActionCreator(testProp)(action, props, vectorKeys);\n  };\n\n  return vectorAction;\n};\n\nvar getActionCreator = function (prop) {\n  if (typeof prop === 'number') {\n    return createAction;\n  } else if (Array.isArray(prop)) {\n    return createArrayAction;\n  } else if (isUnitProp(prop)) {\n    return createUnitAction;\n  } else if (color.test(prop)) {\n    return createColorAction;\n  } else if (complex.test(prop)) {\n    return createComplexAction;\n  } else if (typeof prop === 'object') {\n    return createObjectAction;\n  } else {\n    return createAction;\n  }\n};\n\nvar decay = function (props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return action(function (_a) {\n    var complete = _a.complete,\n        update = _a.update;\n    var _b = props.velocity,\n        velocity = _b === void 0 ? 0 : _b,\n        _c = props.from,\n        from = _c === void 0 ? 0 : _c,\n        _d = props.power,\n        power = _d === void 0 ? 0.8 : _d,\n        _e = props.timeConstant,\n        timeConstant = _e === void 0 ? 350 : _e,\n        _f = props.restDelta,\n        restDelta = _f === void 0 ? 0.5 : _f,\n        modifyTarget = props.modifyTarget;\n    var elapsed = 0;\n    var amplitude = power * velocity;\n    var idealTarget = from + amplitude;\n    var target = typeof modifyTarget === 'undefined' ? idealTarget : modifyTarget(idealTarget);\n    if (target !== idealTarget) amplitude = target - from;\n    var process = sync.update(function (_a) {\n      var frameDelta = _a.delta;\n      elapsed += frameDelta;\n      var delta = -amplitude * Math.exp(-elapsed / timeConstant);\n      var isMoving = delta > restDelta || delta < -restDelta;\n      var current = isMoving ? target + delta : target;\n      update(current);\n\n      if (!isMoving) {\n        cancelSync.update(process);\n        complete();\n      }\n    }, true);\n    return {\n      stop: function () {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\n\nvar vectorDecay = /*#__PURE__*/createVectorAction(decay, {\n  from: number.test,\n  modifyTarget: function (func) {\n    return typeof func === 'function';\n  },\n  velocity: number.test\n});\n\nvar spring = function (props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return action(function (_a) {\n    var update = _a.update,\n        complete = _a.complete;\n    var _b = props.velocity,\n        velocity = _b === void 0 ? 0.0 : _b;\n    var _c = props.from,\n        from = _c === void 0 ? 0.0 : _c,\n        _d = props.to,\n        to = _d === void 0 ? 0.0 : _d,\n        _e = props.stiffness,\n        stiffness = _e === void 0 ? 100 : _e,\n        _f = props.damping,\n        damping = _f === void 0 ? 10 : _f,\n        _g = props.mass,\n        mass = _g === void 0 ? 1.0 : _g,\n        _h = props.restSpeed,\n        restSpeed = _h === void 0 ? 0.01 : _h,\n        _j = props.restDelta,\n        restDelta = _j === void 0 ? 0.01 : _j;\n    var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n    var t = 0;\n    var delta = to - from;\n    var position = from;\n    var prevPosition = position;\n    var process = sync.update(function (_a) {\n      var timeDelta = _a.delta;\n      t += timeDelta;\n      var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n      var angularFreq = Math.sqrt(stiffness / mass) / 1000;\n      prevPosition = position;\n\n      if (dampingRatio < 1) {\n        var envelope = Math.exp(-dampingRatio * angularFreq * t);\n        var expoDecay = angularFreq * Math.sqrt(1.0 - dampingRatio * dampingRatio);\n        position = to - envelope * ((initialVelocity + dampingRatio * angularFreq * delta) / expoDecay * Math.sin(expoDecay * t) + delta * Math.cos(expoDecay * t));\n      } else {\n        var envelope = Math.exp(-angularFreq * t);\n        position = to - envelope * (delta + (initialVelocity + angularFreq * delta) * t);\n      }\n\n      velocity = velocityPerSecond(position - prevPosition, timeDelta);\n      var isBelowVelocityThreshold = Math.abs(velocity) <= restSpeed;\n      var isBelowDisplacementThreshold = Math.abs(to - position) <= restDelta;\n\n      if (isBelowVelocityThreshold && isBelowDisplacementThreshold) {\n        position = to;\n        update(position);\n        cancelSync.update(process);\n        complete();\n      } else {\n        update(position);\n      }\n    }, true);\n    return {\n      stop: function () {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\n\nvar vectorSpring = /*#__PURE__*/createVectorAction(spring, {\n  from: number.test,\n  to: number.test,\n  stiffness: number.test,\n  damping: number.test,\n  mass: number.test,\n  velocity: number.test\n});\n\nvar inertia = function (_a) {\n  var _b = _a.from,\n      from = _b === void 0 ? 0 : _b,\n      _c = _a.velocity,\n      velocity = _c === void 0 ? 0 : _c,\n      min = _a.min,\n      max = _a.max,\n      _d = _a.power,\n      power = _d === void 0 ? 0.8 : _d,\n      _e = _a.timeConstant,\n      timeConstant = _e === void 0 ? 700 : _e,\n      _f = _a.bounceStiffness,\n      bounceStiffness = _f === void 0 ? 500 : _f,\n      _g = _a.bounceDamping,\n      bounceDamping = _g === void 0 ? 10 : _g,\n      _h = _a.restDelta,\n      restDelta = _h === void 0 ? 1 : _h,\n      modifyTarget = _a.modifyTarget;\n  return action(function (_a) {\n    var update = _a.update,\n        complete = _a.complete;\n    var prev = from;\n    var current = from;\n    var activeAnimation;\n\n    var isOutOfBounds = function (v) {\n      return min !== undefined && v < min || max !== undefined && v > max;\n    };\n\n    var boundaryNearest = function (v) {\n      return Math.abs(min - v) < Math.abs(max - v) ? min : max;\n    };\n\n    var startAnimation = function (animation, next) {\n      activeAnimation && activeAnimation.stop();\n      activeAnimation = animation.start({\n        update: update,\n        complete: function () {\n          if (next) {\n            next();\n            return;\n          }\n\n          complete();\n        }\n      });\n    };\n\n    var startSpring = function (props) {\n      startAnimation(spring(__assign(__assign({}, props), {\n        stiffness: bounceStiffness,\n        damping: bounceDamping,\n        restDelta: restDelta\n      })));\n    };\n\n    if (isOutOfBounds(from)) {\n      startSpring({\n        from: from,\n        velocity: velocity,\n        to: boundaryNearest(from)\n      });\n    } else {\n      var to = power * velocity + from;\n\n      if (typeof modifyTarget !== 'undefined') {\n        to = modifyTarget(to);\n        modifyTarget = void 0;\n        velocity = (to - from) / power;\n      }\n\n      var animation = decay({\n        from: from,\n        velocity: velocity,\n        timeConstant: timeConstant,\n        power: power,\n        restDelta: restDelta,\n        modifyTarget: modifyTarget\n      });\n      var next = void 0;\n\n      if (isOutOfBounds(to)) {\n        var boundary_1 = boundaryNearest(to);\n        var heading_1 = boundary_1 == min ? -1 : 1;\n        animation = animation.while(function (v) {\n          prev = current;\n          velocity = velocityPerSecond(v - prev, getFrameData().delta);\n          current = v;\n          return boundary_1 - v * heading_1 > 0;\n        });\n\n        next = function () {\n          return startSpring({\n            from: current,\n            to: boundary_1,\n            velocity: velocity\n          });\n        };\n      }\n\n      startAnimation(animation, next);\n    }\n\n    return {\n      stop: function () {\n        return activeAnimation && activeAnimation.stop();\n      }\n    };\n  });\n};\n\nvar index = /*#__PURE__*/createVectorAction(inertia, {\n  from: number.test,\n  velocity: number.test,\n  min: number.test,\n  max: number.test,\n  damping: number.test,\n  stiffness: number.test,\n  modifyTarget: function (func) {\n    return typeof func === 'function';\n  }\n});\n\nvar frame = function () {\n  return action(function (_a) {\n    var update = _a.update;\n    var initialTime = 0;\n    var process = sync.update(function (_a) {\n      var timestamp = _a.timestamp;\n      if (!initialTime) initialTime = timestamp;\n      update(timestamp - initialTime);\n    }, true, true);\n    return {\n      stop: function () {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\n\nvar scrubber = function (_a) {\n  var _b = _a.from,\n      from = _b === void 0 ? 0 : _b,\n      _c = _a.to,\n      to = _c === void 0 ? 1 : _c,\n      _d = _a.ease,\n      ease = _d === void 0 ? linear : _d,\n      _e = _a.reverseEase,\n      reverseEase = _e === void 0 ? false : _e;\n\n  if (reverseEase) {\n    ease = createReversedEasing(ease);\n  }\n\n  return action(function (_a) {\n    var update = _a.update;\n    return {\n      seek: function (progress) {\n        return update(progress);\n      }\n    };\n  }).pipe(ease, function (v) {\n    return mix(from, to, v);\n  });\n};\n\nvar vectorScrubber = /*#__PURE__*/createVectorAction(scrubber, {\n  ease: function (func) {\n    return typeof func === 'function';\n  },\n  from: number.test,\n  to: number.test\n});\nvar clampProgress = /*#__PURE__*/clamp(0, 1);\n\nvar tween = function (props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return action(function (_a) {\n    var update = _a.update,\n        complete = _a.complete;\n    var _b = props.duration,\n        duration = _b === void 0 ? 300 : _b,\n        _c = props.ease,\n        ease = _c === void 0 ? easeOut : _c,\n        _d = props.flip,\n        flip = _d === void 0 ? 0 : _d,\n        _e = props.loop,\n        loop = _e === void 0 ? 0 : _e,\n        _f = props.yoyo,\n        yoyo = _f === void 0 ? 0 : _f,\n        _g = props.repeatDelay,\n        repeatDelay = _g === void 0 ? 0 : _g;\n    var _h = props.from,\n        from = _h === void 0 ? 0 : _h,\n        _j = props.to,\n        to = _j === void 0 ? 1 : _j,\n        _k = props.elapsed,\n        elapsed = _k === void 0 ? 0 : _k,\n        _l = props.flipCount,\n        flipCount = _l === void 0 ? 0 : _l,\n        _m = props.yoyoCount,\n        yoyoCount = _m === void 0 ? 0 : _m,\n        _o = props.loopCount,\n        loopCount = _o === void 0 ? 0 : _o;\n    var playhead = vectorScrubber({\n      from: from,\n      to: to,\n      ease: ease\n    }).start(update);\n    var currentProgress = 0;\n    var process;\n    var isActive = false;\n\n    var reverseAnimation = function (reverseEase) {\n      var _a;\n\n      if (reverseEase === void 0) {\n        reverseEase = false;\n      }\n\n      _a = [to, from], from = _a[0], to = _a[1];\n      playhead = vectorScrubber({\n        from: from,\n        to: to,\n        ease: ease,\n        reverseEase: reverseEase\n      }).start(update);\n    };\n\n    var isTweenComplete = function () {\n      var isComplete = isActive && elapsed > duration + repeatDelay;\n      if (!isComplete) return false;\n      if (isComplete && !loop && !flip && !yoyo) return true;\n      elapsed = duration - (elapsed - repeatDelay);\n\n      if (loop && loopCount < loop) {\n        loopCount++;\n        return false;\n      } else if (flip && flipCount < flip) {\n        flipCount++;\n        reverseAnimation();\n        return false;\n      } else if (yoyo && yoyoCount < yoyo) {\n        yoyoCount++;\n        reverseAnimation(yoyoCount % 2 !== 0);\n        return false;\n      }\n\n      return true;\n    };\n\n    var updateTween = function () {\n      currentProgress = clampProgress(progress(0, duration, elapsed));\n      playhead.seek(currentProgress);\n    };\n\n    var startTimer = function () {\n      isActive = true;\n      process = sync.update(function (_a) {\n        var delta = _a.delta;\n        elapsed += delta;\n        updateTween();\n\n        if (isTweenComplete()) {\n          cancelSync.update(process);\n          complete && sync.update(complete, false, true);\n        }\n      }, true);\n    };\n\n    var stopTimer = function () {\n      isActive = false;\n      if (process) cancelSync.update(process);\n    };\n\n    startTimer();\n    return {\n      isActive: function () {\n        return isActive;\n      },\n      getElapsed: function () {\n        return clamp(0, duration, elapsed);\n      },\n      getProgress: function () {\n        return currentProgress;\n      },\n      stop: function () {\n        stopTimer();\n      },\n      pause: function () {\n        stopTimer();\n        return this;\n      },\n      resume: function () {\n        if (!isActive) startTimer();\n        return this;\n      },\n      seek: function (newProgress) {\n        elapsed = mix(0, duration, newProgress);\n        sync.update(updateTween, false, true);\n        return this;\n      },\n      reverse: function () {\n        reverseAnimation();\n        return this;\n      }\n    };\n  });\n};\n\nvar clampProgress$1 = /*#__PURE__*/clamp(0, 1);\n\nvar defaultEasings = function (values, easing) {\n  return values.map(function () {\n    return easing || easeOut;\n  }).splice(0, values.length - 1);\n};\n\nvar defaultTimings = function (values) {\n  var numValues = values.length;\n  return values.map(function (value, i) {\n    return i !== 0 ? i / (numValues - 1) : 0;\n  });\n};\n\nvar interpolateScrubbers = function (input, scrubbers, update) {\n  var rangeLength = input.length;\n  var finalInputIndex = rangeLength - 1;\n  var finalScrubberIndex = finalInputIndex - 1;\n  var subs = scrubbers.map(function (scrub) {\n    return scrub.start(update);\n  });\n  return function (v) {\n    if (v <= input[0]) {\n      subs[0].seek(0);\n    }\n\n    if (v >= input[finalInputIndex]) {\n      subs[finalScrubberIndex].seek(1);\n    }\n\n    var i = 1;\n\n    for (; i < rangeLength; i++) {\n      if (input[i] > v || i === finalInputIndex) break;\n    }\n\n    var progressInRange = progress(input[i - 1], input[i], v);\n    subs[i - 1].seek(clampProgress$1(progressInRange));\n  };\n};\n\nvar keyframes = function (_a) {\n  var easings = _a.easings,\n      _b = _a.ease,\n      ease = _b === void 0 ? linear : _b,\n      times = _a.times,\n      values = _a.values,\n      tweenProps = __rest(_a, [\"easings\", \"ease\", \"times\", \"values\"]);\n\n  easings = Array.isArray(easings) ? easings : defaultEasings(values, easings);\n  times = times || defaultTimings(values);\n  var scrubbers = easings.map(function (easing, i) {\n    return vectorScrubber({\n      from: values[i],\n      to: values[i + 1],\n      ease: easing\n    });\n  });\n  return tween(__assign(__assign({}, tweenProps), {\n    ease: ease\n  })).applyMiddleware(function (update) {\n    return interpolateScrubbers(times, scrubbers, update);\n  });\n};\n\nvar physics = function (props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return action(function (_a) {\n    var complete = _a.complete,\n        update = _a.update;\n    var _b = props.acceleration,\n        acceleration = _b === void 0 ? 0 : _b,\n        _c = props.friction,\n        friction = _c === void 0 ? 0 : _c,\n        _d = props.velocity,\n        velocity = _d === void 0 ? 0 : _d,\n        springStrength = props.springStrength,\n        to = props.to;\n    var _e = props.restSpeed,\n        restSpeed = _e === void 0 ? 0.001 : _e,\n        _f = props.from,\n        from = _f === void 0 ? 0 : _f;\n    var current = from;\n    var process = sync.update(function (_a) {\n      var delta = _a.delta;\n      var elapsed = Math.max(delta, 16);\n      if (acceleration) velocity += velocityPerFrame(acceleration, elapsed);\n      if (friction) velocity *= Math.pow(1 - friction, elapsed / 100);\n\n      if (springStrength !== undefined && to !== undefined) {\n        var distanceToTarget = to - current;\n        velocity += distanceToTarget * velocityPerFrame(springStrength, elapsed);\n      }\n\n      current += velocityPerFrame(velocity, elapsed);\n      update(current);\n      var isComplete = restSpeed !== false && (!velocity || Math.abs(velocity) <= restSpeed);\n\n      if (isComplete) {\n        cancelSync.update(process);\n        complete();\n      }\n    }, true);\n    return {\n      set: function (v) {\n        current = v;\n        return this;\n      },\n      setAcceleration: function (v) {\n        acceleration = v;\n        return this;\n      },\n      setFriction: function (v) {\n        friction = v;\n        return this;\n      },\n      setSpringStrength: function (v) {\n        springStrength = v;\n        return this;\n      },\n      setSpringTarget: function (v) {\n        to = v;\n        return this;\n      },\n      setVelocity: function (v) {\n        velocity = v;\n        return this;\n      },\n      stop: function () {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\n\nvar vectorPhysics = /*#__PURE__*/createVectorAction(physics, {\n  acceleration: number.test,\n  friction: number.test,\n  velocity: number.test,\n  from: number.test,\n  to: number.test,\n  springStrength: number.test\n});\nvar DEFAULT_DURATION = 300;\n\nvar flattenTimings = function (instructions) {\n  var flatInstructions = [];\n  var lastArg = instructions[instructions.length - 1];\n  var isStaggered = typeof lastArg === 'number';\n  var staggerDelay = isStaggered ? lastArg : 0;\n  var segments = isStaggered ? instructions.slice(0, -1) : instructions;\n  var numSegments = segments.length;\n  var offset = 0;\n  segments.forEach(function (item, i) {\n    flatInstructions.push(item);\n\n    if (i !== numSegments - 1) {\n      var duration = item.duration || DEFAULT_DURATION;\n      offset = staggerDelay;\n      flatInstructions.push(\"\" + (offset - duration));\n    }\n  });\n  return flatInstructions;\n};\n\nvar flattenArrayInstructions = function (instructions, instruction) {\n  Array.isArray(instruction) ? instructions.push.apply(instructions, flattenTimings(instruction)) : instructions.push(instruction);\n  return instructions;\n};\n\nvar convertDefToProps = function (props, def, i) {\n  var duration = props.duration,\n      easings = props.easings,\n      times = props.times,\n      values = props.values;\n  var numValues = values.length;\n  var prevTimeTo = times[numValues - 1];\n  var timeFrom = def.at === 0 ? 0 : def.at / duration;\n  var timeTo = (def.at + def.duration) / duration;\n\n  if (i === 0) {\n    values.push(def.from);\n    times.push(timeFrom);\n  } else {\n    if (prevTimeTo !== timeFrom) {\n      if (def.from !== undefined) {\n        values.push(values[numValues - 1]);\n        times.push(timeFrom);\n        easings.push(linear);\n      }\n\n      var from = def.from !== undefined ? def.from : values[numValues - 1];\n      values.push(from);\n      times.push(timeFrom);\n      easings.push(linear);\n    } else if (def.from !== undefined) {\n      values.push(def.from);\n      times.push(timeFrom);\n      easings.push(linear);\n    }\n  }\n\n  values.push(def.to);\n  times.push(timeTo);\n  easings.push(def.ease || easeInOut);\n  return props;\n};\n\nvar timeline = function (instructions, _a) {\n  var _b = _a === void 0 ? {} : _a,\n      duration = _b.duration,\n      elapsed = _b.elapsed,\n      ease = _b.ease,\n      loop = _b.loop,\n      flip = _b.flip,\n      yoyo = _b.yoyo;\n\n  var playhead = 0;\n  var calculatedDuration = 0;\n  var flatInstructions = instructions.reduce(flattenArrayInstructions, []);\n  var animationDefs = [];\n  flatInstructions.forEach(function (instruction) {\n    if (typeof instruction === 'string') {\n      playhead += parseFloat(instruction);\n    } else if (typeof instruction === 'number') {\n      playhead = instruction;\n    } else {\n      var def = __assign(__assign({}, instruction), {\n        at: playhead\n      });\n\n      def.duration = def.duration === undefined ? DEFAULT_DURATION : def.duration;\n      animationDefs.push(def);\n      playhead += def.duration;\n      calculatedDuration = Math.max(calculatedDuration, def.at + def.duration);\n    }\n  });\n  var tracks = {};\n  var numDefs = animationDefs.length;\n\n  for (var i = 0; i < numDefs; i++) {\n    var def = animationDefs[i];\n    var track = def.track;\n\n    if (track === undefined) {\n      throw new Error('No track defined');\n    }\n\n    if (!tracks.hasOwnProperty(track)) tracks[track] = [];\n    tracks[track].push(def);\n  }\n\n  var trackKeyframes = {};\n\n  for (var key in tracks) {\n    if (tracks.hasOwnProperty(key)) {\n      var keyframeProps = tracks[key].reduce(convertDefToProps, {\n        duration: calculatedDuration,\n        easings: [],\n        times: [],\n        values: []\n      });\n      trackKeyframes[key] = keyframes(__assign(__assign({}, keyframeProps), {\n        duration: duration || calculatedDuration,\n        ease: ease,\n        elapsed: elapsed,\n        loop: loop,\n        yoyo: yoyo,\n        flip: flip\n      }));\n    }\n  }\n\n  return composite(trackKeyframes);\n};\n\nvar listen = function (element, events, options) {\n  return action(function (_a) {\n    var update = _a.update;\n    var eventNames = events.split(' ').map(function (eventName) {\n      element.addEventListener(eventName, update, options);\n      return eventName;\n    });\n    return {\n      stop: function () {\n        return eventNames.forEach(function (eventName) {\n          return element.removeEventListener(eventName, update, options);\n        });\n      }\n    };\n  });\n};\n\nvar defaultPointerPos = function () {\n  return {\n    clientX: 0,\n    clientY: 0,\n    pageX: 0,\n    pageY: 0,\n    x: 0,\n    y: 0\n  };\n};\n\nvar eventToPoint = function (e, point) {\n  if (point === void 0) {\n    point = defaultPointerPos();\n  }\n\n  point.clientX = point.x = e.clientX;\n  point.clientY = point.y = e.clientY;\n  point.pageX = e.pageX;\n  point.pageY = e.pageY;\n  return point;\n};\n\nvar points = [/*#__PURE__*/defaultPointerPos()];\nvar isTouchDevice = false;\n\nif (typeof document !== 'undefined') {\n  var updatePointsLocation = function (_a) {\n    var touches = _a.touches;\n    isTouchDevice = true;\n    var numTouches = touches.length;\n    points.length = 0;\n\n    for (var i = 0; i < numTouches; i++) {\n      var thisTouch = touches[i];\n      points.push(eventToPoint(thisTouch));\n    }\n  };\n\n  listen(document, 'touchstart touchmove', {\n    passive: true,\n    capture: true\n  }).start(updatePointsLocation);\n}\n\nvar multitouch = function (_a) {\n  var _b = _a === void 0 ? {} : _a,\n      _c = _b.preventDefault,\n      preventDefault = _c === void 0 ? true : _c,\n      _d = _b.scale,\n      scale = _d === void 0 ? 1.0 : _d,\n      _e = _b.rotate,\n      rotate = _e === void 0 ? 0.0 : _e;\n\n  return action(function (_a) {\n    var update = _a.update;\n    var output = {\n      touches: points,\n      scale: scale,\n      rotate: rotate\n    };\n    var initialDistance = 0.0;\n    var initialRotation = 0.0;\n    var isGesture = points.length > 1;\n\n    if (isGesture) {\n      var firstTouch = points[0],\n          secondTouch = points[1];\n      initialDistance = distance(firstTouch, secondTouch);\n      initialRotation = angle(firstTouch, secondTouch);\n    }\n\n    var updatePoint = function () {\n      if (isGesture) {\n        var firstTouch = points[0],\n            secondTouch = points[1];\n        var newDistance = distance(firstTouch, secondTouch);\n        var newRotation = angle(firstTouch, secondTouch);\n        output.scale = scale * (newDistance / initialDistance);\n        output.rotate = rotate + (newRotation - initialRotation);\n      }\n\n      update(output);\n    };\n\n    var onMove = function (e) {\n      if (preventDefault || e.touches.length > 1) e.preventDefault();\n      sync.update(updatePoint);\n    };\n\n    var updateOnMove = listen(document, 'touchmove', {\n      passive: !preventDefault\n    }).start(onMove);\n    if (isTouchDevice) sync.update(updatePoint);\n    return {\n      stop: function () {\n        cancelSync.update(updatePoint);\n        updateOnMove.stop();\n      }\n    };\n  });\n};\n\nvar getIsTouchDevice = function () {\n  return isTouchDevice;\n};\n\nvar point = /*#__PURE__*/defaultPointerPos();\nvar isMouseDevice = false;\n\nif (typeof document !== 'undefined') {\n  var updatePointLocation = function (e) {\n    isMouseDevice = true;\n    eventToPoint(e, point);\n  };\n\n  listen(document, 'mousedown mousemove', true).start(updatePointLocation);\n}\n\nvar mouse = function (_a) {\n  var _b = (_a === void 0 ? {} : _a).preventDefault,\n      preventDefault = _b === void 0 ? true : _b;\n  return action(function (_a) {\n    var update = _a.update;\n\n    var updatePoint = function () {\n      return update(point);\n    };\n\n    var onMove = function (e) {\n      if (preventDefault) e.preventDefault();\n      sync.update(updatePoint);\n    };\n\n    var updateOnMove = listen(document, 'mousemove').start(onMove);\n    if (isMouseDevice) sync.update(updatePoint);\n    return {\n      stop: function () {\n        cancelSync.update(updatePoint);\n        updateOnMove.stop();\n      }\n    };\n  });\n};\n\nvar getFirstTouch = function (_a) {\n  var firstTouch = _a[0];\n  return firstTouch;\n};\n\nvar pointer = function (props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return getIsTouchDevice() ? multitouch(props).pipe(function (_a) {\n    var touches = _a.touches;\n    return touches;\n  }, getFirstTouch) : mouse(props);\n};\n\nvar index$1 = function (_a) {\n  if (_a === void 0) {\n    _a = {};\n  }\n\n  var x = _a.x,\n      y = _a.y,\n      props = __rest(_a, [\"x\", \"y\"]);\n\n  if (x !== undefined || y !== undefined) {\n    var applyXOffset_1 = applyOffset(x || 0);\n    var applyYOffset_1 = applyOffset(y || 0);\n    var delta_1 = {\n      x: 0,\n      y: 0\n    };\n    return pointer(props).pipe(function (point) {\n      delta_1.x = applyXOffset_1(point.x);\n      delta_1.y = applyYOffset_1(point.y);\n      return delta_1;\n    });\n  } else {\n    return pointer(props);\n  }\n};\n\nvar chain = function () {\n  var actions = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    actions[_i] = arguments[_i];\n  }\n\n  return action(function (_a) {\n    var update = _a.update,\n        complete = _a.complete;\n    var i = 0;\n    var current;\n\n    var playCurrent = function () {\n      current = actions[i].start({\n        complete: function () {\n          i++;\n          i >= actions.length ? complete() : playCurrent();\n        },\n        update: update\n      });\n    };\n\n    playCurrent();\n    return {\n      stop: function () {\n        return current && current.stop();\n      }\n    };\n  });\n};\n\nvar crossfade = function (a, b) {\n  return action(function (observer) {\n    var balance = 0;\n    var fadable = parallel$1(a, b).start(__assign(__assign({}, observer), {\n      update: function (_a) {\n        var va = _a[0],\n            vb = _a[1];\n        observer.update(mix(va, vb, balance));\n      }\n    }));\n    return {\n      setBalance: function (v) {\n        return balance = v;\n      },\n      stop: function () {\n        return fadable.stop();\n      }\n    };\n  });\n};\n\nvar delay = function (timeToDelay) {\n  return action(function (_a) {\n    var complete = _a.complete;\n    var timeout = setTimeout(complete, timeToDelay);\n    return {\n      stop: function () {\n        return clearTimeout(timeout);\n      }\n    };\n  });\n};\n\nvar merge = function () {\n  var actions = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    actions[_i] = arguments[_i];\n  }\n\n  return action(function (observer) {\n    var subs = actions.map(function (thisAction) {\n      return thisAction.start(observer);\n    });\n    return {\n      stop: function () {\n        return subs.forEach(function (sub) {\n          return sub.stop();\n        });\n      }\n    };\n  });\n};\n\nvar schedule = function (scheduler, schedulee) {\n  return action(function (_a) {\n    var update = _a.update,\n        complete = _a.complete;\n    var latest;\n    var schedulerSub = scheduler.start({\n      update: function () {\n        return latest !== undefined && update(latest);\n      },\n      complete: complete\n    });\n    var scheduleeSub = schedulee.start({\n      update: function (v) {\n        return latest = v;\n      },\n      complete: complete\n    });\n    return {\n      stop: function () {\n        schedulerSub.stop();\n        scheduleeSub.stop();\n      }\n    };\n  });\n};\n\nvar stagger = function (actions, interval) {\n  var intervalIsNumber = typeof interval === 'number';\n  var actionsWithDelay = actions.map(function (a, i) {\n    var timeToDelay = intervalIsNumber ? interval * i : interval(i);\n    return chain(delay(timeToDelay), a);\n  });\n  return parallel$1.apply(void 0, actionsWithDelay);\n};\n\nvar appendUnit = function (unit) {\n  return function (v) {\n    return \"\" + v + unit;\n  };\n};\n\nvar steps = function (st, min, max) {\n  if (min === void 0) {\n    min = 0;\n  }\n\n  if (max === void 0) {\n    max = 1;\n  }\n\n  return function (v) {\n    var current = progress(min, max, v);\n    return mix(min, max, stepProgress(st, current));\n  };\n};\n\nvar transformMap = function (childTransformers) {\n  return function (v) {\n    var output = __assign({}, v);\n\n    for (var key in childTransformers) {\n      if (childTransformers.hasOwnProperty(key)) {\n        var childTransformer = childTransformers[key];\n        output[key] = childTransformer(v[key]);\n      }\n    }\n\n    return output;\n  };\n};\n\nvar transformers = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  applyOffset: applyOffset,\n  clamp: clamp,\n  conditional: conditional,\n  interpolate: interpolate,\n  blendArray: mixArray,\n  blendColor: mixColor,\n  pipe: pipe,\n  smooth: smooth,\n  snap: snap,\n  generateStaticSpring: springForce,\n  nonlinearSpring: springForceExpo,\n  linearSpring: springForceLinear,\n  wrap: wrap,\n  appendUnit: appendUnit,\n  steps: steps,\n  transformMap: transformMap\n});\n\nvar css = function (element, props) {\n  warning(false, 'css() is deprecated, use styler instead');\n  return styler(element, props);\n};\n\nvar svg = function (element, props) {\n  warning(false, 'svg() is deprecated, use styler instead');\n  return styler(element, props);\n};\n\nexport { Action, ValueReaction, action, calc, chain, composite, crossfade, css, vectorDecay as decay, delay, frame as everyFrame, index as inertia, keyframes, listen, merge, mouse, multicast, multitouch, parallel$1 as parallel, vectorPhysics as physics, index$1 as pointer, schedule, vectorSpring as spring, stagger, svg, timeline, transformers as transform, tween, value };","map":{"version":3,"sources":["D:/J0E/Programming/ITI-Graduation-Project/CarReact/car-react/node_modules/popmotion-pose/node_modules/popmotion/dist/popmotion.es.js"],"names":["__assign","__spreadArrays","__extends","__rest","pipe","angle","degreesToRadians","distance","isPoint3D","isPoint","mix","pointFromVector","progress","radiansToDegrees","smoothFrame","velocityPerFrame","velocityPerSecond","mixComplex","mixColor","clamp","applyOffset","conditional","interpolate","mixArray","smooth","snap","springForce","springForceExpo","springForceLinear","wrap","sync","getFrameData","cancelSync","color","complex","px","percent","degrees","vh","vw","number","styleValueTypes","valueTypes","createReversedEasing","linear","easeOut","easeInOut","easing","styler","default","warning","Chainable","props","prototype","applyMiddleware","middleware","create","funcs","_i","arguments","length","pipedUpdate","apply","update","v","while","predicate","complete","filter","Observer","_a","observer","_this","onComplete","isActive","updateObserver","error","err","forEach","m","createObserver","observerCandidate","Action","_super","start","isComplete","subscription","stop","undefined","init","observerProps","api","registerParent","action","BaseMulticast","subscribers","subscriber","i","subscribe","push","unsubscribe","index","indexOf","splice","parent","Multicast","multicast","stepProgress","steps","segment","subsegment","percentProgressOfTarget","Math","min","subsegmentProgressOfTarget","segmentProgressOfTarget","floor","calc","Object","freeze","__proto__","dilate","getValueFromProgress","pointFromAngleAndDistance","getProgressFromValue","speedPerFrame","speedPerSecond","isValueList","Array","isArray","isSingleValue","typeOfV","ValueReaction","call","scheduleVelocityCheck","postRender","velocityCheck","timestamp","lastUpdated","prev","current","value","updateCurrent","getVelocityOfCurrent","getSingleVelocity","getListVelocity","key","hasOwnProperty","getMapVelocity","initialSubscription","get","getVelocity","delta","timeDelta","sub","parseFloat","map","c","velocity","multi","getCount","getFirst","getOutput","mapApi","setProp","startActions","actions","numActions","output","updateOutput","numCompletedActions","subs","a","name","hasCompleted","keys","reduce","methodName","composite","args","propKey","starter","parallel","parallel$1","createVectorTests","typeTests","testNames","isVectorProp","prop","getVectorKeys","vectorKeys","testVectorProps","some","unitTypes","findUnitType","find","type","test","isUnitProp","Boolean","createAction","reduceArrayValue","createArrayAction","firstVectorKey","actionList","childActionProps","getActionCreator","reduceObjectValue","createObjectAction","actionMap","createUnitAction","from","to","unitType","transform","parse","createMixerAction","mixer","createColorAction","createComplexAction","createVectorAction","vectorAction","isVector","testKey","testProp","decay","_b","_c","_d","power","_e","timeConstant","_f","restDelta","modifyTarget","elapsed","amplitude","idealTarget","target","process","frameDelta","exp","isMoving","vectorDecay","func","spring","stiffness","damping","_g","mass","_h","restSpeed","_j","initialVelocity","t","position","prevPosition","dampingRatio","sqrt","angularFreq","envelope","expoDecay","sin","cos","isBelowVelocityThreshold","abs","isBelowDisplacementThreshold","vectorSpring","inertia","max","bounceStiffness","bounceDamping","activeAnimation","isOutOfBounds","boundaryNearest","startAnimation","animation","next","startSpring","boundary_1","heading_1","frame","initialTime","scrubber","ease","reverseEase","seek","vectorScrubber","clampProgress","tween","duration","flip","loop","yoyo","repeatDelay","_k","_l","flipCount","_m","yoyoCount","_o","loopCount","playhead","currentProgress","reverseAnimation","isTweenComplete","updateTween","startTimer","stopTimer","getElapsed","getProgress","pause","resume","newProgress","reverse","clampProgress$1","defaultEasings","values","defaultTimings","numValues","interpolateScrubbers","input","scrubbers","rangeLength","finalInputIndex","finalScrubberIndex","scrub","progressInRange","keyframes","easings","times","tweenProps","physics","acceleration","friction","springStrength","pow","distanceToTarget","set","setAcceleration","setFriction","setSpringStrength","setSpringTarget","setVelocity","vectorPhysics","DEFAULT_DURATION","flattenTimings","instructions","flatInstructions","lastArg","isStaggered","staggerDelay","segments","slice","numSegments","offset","item","flattenArrayInstructions","instruction","convertDefToProps","def","prevTimeTo","timeFrom","at","timeTo","timeline","calculatedDuration","animationDefs","tracks","numDefs","track","Error","trackKeyframes","keyframeProps","listen","element","events","options","eventNames","split","eventName","addEventListener","removeEventListener","defaultPointerPos","clientX","clientY","pageX","pageY","x","y","eventToPoint","e","point","points","isTouchDevice","document","updatePointsLocation","touches","numTouches","thisTouch","passive","capture","multitouch","preventDefault","scale","rotate","initialDistance","initialRotation","isGesture","firstTouch","secondTouch","updatePoint","newDistance","newRotation","onMove","updateOnMove","getIsTouchDevice","isMouseDevice","updatePointLocation","mouse","getFirstTouch","pointer","index$1","applyXOffset_1","applyYOffset_1","delta_1","chain","playCurrent","crossfade","b","balance","fadable","va","vb","setBalance","delay","timeToDelay","timeout","setTimeout","clearTimeout","merge","thisAction","schedule","scheduler","schedulee","latest","schedulerSub","scheduleeSub","stagger","interval","intervalIsNumber","actionsWithDelay","appendUnit","unit","st","transformMap","childTransformers","childTransformer","transformers","blendArray","blendColor","generateStaticSpring","nonlinearSpring","linearSpring","css","svg","everyFrame"],"mappings":"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","sourcesContent":["import { __assign, __spreadArrays, __extends, __rest } from 'tslib';\nimport { pipe, angle, degreesToRadians, distance, isPoint3D, isPoint, mix, pointFromVector, progress, radiansToDegrees, smoothFrame, velocityPerFrame, velocityPerSecond, mixComplex, mixColor, clamp, applyOffset, conditional, interpolate, mixArray, smooth, snap, springForce, springForceExpo, springForceLinear, wrap } from '@popmotion/popcorn';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport { color, complex, px, percent, degrees, vh, vw, number } from 'style-value-types';\nimport * as styleValueTypes from 'style-value-types';\nexport { styleValueTypes as valueTypes };\nimport { createReversedEasing, linear, easeOut, easeInOut } from '@popmotion/easing';\nimport * as easing from '@popmotion/easing';\nexport { easing };\nimport styler from 'stylefire';\nexport { default as styler } from 'stylefire';\nimport { warning } from 'hey-listen';\n\nvar Chainable = /*#__PURE__*/function () {\n    function Chainable(props) {\n        if (props === void 0) {\n            props = {};\n        }\n        this.props = props;\n    }\n    Chainable.prototype.applyMiddleware = function (middleware) {\n        return this.create(__assign(__assign({}, this.props), { middleware: this.props.middleware ? __spreadArrays([middleware], this.props.middleware) : [middleware] }));\n    };\n    Chainable.prototype.pipe = function () {\n        var funcs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            funcs[_i] = arguments[_i];\n        }\n        var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return update(pipedUpdate(v));\n            };\n        });\n    };\n    Chainable.prototype.while = function (predicate) {\n        return this.applyMiddleware(function (update, complete) {\n            return function (v) {\n                return predicate(v) ? update(v) : complete();\n            };\n        });\n    };\n    Chainable.prototype.filter = function (predicate) {\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return predicate(v) && update(v);\n            };\n        });\n    };\n    return Chainable;\n}();\n\nvar Observer = /*#__PURE__*/function () {\n    function Observer(_a, observer) {\n        var _this = this;\n        var middleware = _a.middleware,\n            onComplete = _a.onComplete;\n        this.isActive = true;\n        this.update = function (v) {\n            if (_this.observer.update) _this.updateObserver(v);\n        };\n        this.complete = function () {\n            if (_this.observer.complete && _this.isActive) _this.observer.complete();\n            if (_this.onComplete) _this.onComplete();\n            _this.isActive = false;\n        };\n        this.error = function (err) {\n            if (_this.observer.error && _this.isActive) _this.observer.error(err);\n            _this.isActive = false;\n        };\n        this.observer = observer;\n        this.updateObserver = function (v) {\n            return observer.update(v);\n        };\n        this.onComplete = onComplete;\n        if (observer.update && middleware && middleware.length) {\n            middleware.forEach(function (m) {\n                return _this.updateObserver = m(_this.updateObserver, _this.complete);\n            });\n        }\n    }\n    return Observer;\n}();\nvar createObserver = function (observerCandidate, _a, onComplete) {\n    var middleware = _a.middleware;\n    if (typeof observerCandidate === 'function') {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, { update: observerCandidate });\n    } else {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, observerCandidate);\n    }\n};\n\nvar Action = /*#__PURE__*/function (_super) {\n    __extends(Action, _super);\n    function Action() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Action.prototype.create = function (props) {\n        return new Action(props);\n    };\n    Action.prototype.start = function (observerCandidate) {\n        if (observerCandidate === void 0) {\n            observerCandidate = {};\n        }\n        var isComplete = false;\n        var subscription = {\n            stop: function () {\n                return undefined;\n            }\n        };\n        var _a = this.props,\n            init = _a.init,\n            observerProps = __rest(_a, [\"init\"]);\n        var observer = createObserver(observerCandidate, observerProps, function () {\n            isComplete = true;\n            subscription.stop();\n        });\n        var api = init(observer);\n        subscription = api ? __assign(__assign({}, subscription), api) : subscription;\n        if (observerCandidate.registerParent) {\n            observerCandidate.registerParent(subscription);\n        }\n        if (isComplete) subscription.stop();\n        return subscription;\n    };\n    return Action;\n}(Chainable);\nvar action = function (init) {\n    return new Action({ init: init });\n};\n\nvar BaseMulticast = /*#__PURE__*/function (_super) {\n    __extends(BaseMulticast, _super);\n    function BaseMulticast() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.subscribers = [];\n        return _this;\n    }\n    BaseMulticast.prototype.complete = function () {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.complete();\n        });\n    };\n    BaseMulticast.prototype.error = function (err) {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.error(err);\n        });\n    };\n    BaseMulticast.prototype.update = function (v) {\n        for (var i = 0; i < this.subscribers.length; i++) {\n            this.subscribers[i].update(v);\n        }\n    };\n    BaseMulticast.prototype.subscribe = function (observerCandidate) {\n        var _this = this;\n        var observer = createObserver(observerCandidate, this.props);\n        this.subscribers.push(observer);\n        var subscription = {\n            unsubscribe: function () {\n                var index = _this.subscribers.indexOf(observer);\n                if (index !== -1) _this.subscribers.splice(index, 1);\n            }\n        };\n        return subscription;\n    };\n    BaseMulticast.prototype.stop = function () {\n        if (this.parent) this.parent.stop();\n    };\n    BaseMulticast.prototype.registerParent = function (subscription) {\n        this.stop();\n        this.parent = subscription;\n    };\n    return BaseMulticast;\n}(Chainable);\n\nvar Multicast = /*#__PURE__*/function (_super) {\n    __extends(Multicast, _super);\n    function Multicast() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Multicast.prototype.create = function (props) {\n        return new Multicast(props);\n    };\n    return Multicast;\n}(BaseMulticast);\nvar multicast = function () {\n    return new Multicast();\n};\n\nvar stepProgress = function (steps, progress) {\n    var segment = 1 / (steps - 1);\n    var subsegment = 1 / (2 * (steps - 1));\n    var percentProgressOfTarget = Math.min(progress, 1);\n    var subsegmentProgressOfTarget = percentProgressOfTarget / subsegment;\n    var segmentProgressOfTarget = Math.floor((subsegmentProgressOfTarget + 1) / 2);\n    return segmentProgressOfTarget * segment;\n};\n\nvar calc = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    angle: angle,\n    degreesToRadians: degreesToRadians,\n    distance: distance,\n    isPoint3D: isPoint3D,\n    isPoint: isPoint,\n    dilate: mix,\n    getValueFromProgress: mix,\n    pointFromAngleAndDistance: pointFromVector,\n    getProgressFromValue: progress,\n    radiansToDegrees: radiansToDegrees,\n    smooth: smoothFrame,\n    speedPerFrame: velocityPerFrame,\n    speedPerSecond: velocityPerSecond,\n    stepProgress: stepProgress\n});\n\nvar isValueList = function (v) {\n    return Array.isArray(v);\n};\nvar isSingleValue = function (v) {\n    var typeOfV = typeof v;\n    return typeOfV === 'string' || typeOfV === 'number';\n};\nvar ValueReaction = /*#__PURE__*/function (_super) {\n    __extends(ValueReaction, _super);\n    function ValueReaction(props) {\n        var _this = _super.call(this, props) || this;\n        _this.scheduleVelocityCheck = function () {\n            return sync.postRender(_this.velocityCheck);\n        };\n        _this.velocityCheck = function (_a) {\n            var timestamp = _a.timestamp;\n            if (timestamp !== _this.lastUpdated) {\n                _this.prev = _this.current;\n            }\n        };\n        _this.prev = _this.current = props.value || 0;\n        if (isSingleValue(_this.current)) {\n            _this.updateCurrent = function (v) {\n                return _this.current = v;\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getSingleVelocity(_this.current, _this.prev);\n            };\n        } else if (isValueList(_this.current)) {\n            _this.updateCurrent = function (v) {\n                return _this.current = __spreadArrays(v);\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getListVelocity();\n            };\n        } else {\n            _this.updateCurrent = function (v) {\n                _this.current = {};\n                for (var key in v) {\n                    if (v.hasOwnProperty(key)) {\n                        _this.current[key] = v[key];\n                    }\n                }\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getMapVelocity();\n            };\n        }\n        if (props.initialSubscription) _this.subscribe(props.initialSubscription);\n        return _this;\n    }\n    ValueReaction.prototype.create = function (props) {\n        return new ValueReaction(props);\n    };\n    ValueReaction.prototype.get = function () {\n        return this.current;\n    };\n    ValueReaction.prototype.getVelocity = function () {\n        return this.getVelocityOfCurrent();\n    };\n    ValueReaction.prototype.update = function (v) {\n        _super.prototype.update.call(this, v);\n        this.prev = this.current;\n        this.updateCurrent(v);\n        var _a = getFrameData(),\n            delta = _a.delta,\n            timestamp = _a.timestamp;\n        this.timeDelta = delta;\n        this.lastUpdated = timestamp;\n        sync.postRender(this.scheduleVelocityCheck);\n    };\n    ValueReaction.prototype.subscribe = function (observerCandidate) {\n        var sub = _super.prototype.subscribe.call(this, observerCandidate);\n        this.subscribers[this.subscribers.length - 1].update(this.current);\n        return sub;\n    };\n    ValueReaction.prototype.getSingleVelocity = function (current, prev) {\n        return typeof current === 'number' && typeof prev === 'number' ? velocityPerSecond(current - prev, this.timeDelta) : velocityPerSecond(parseFloat(current) - parseFloat(prev), this.timeDelta) || 0;\n    };\n    ValueReaction.prototype.getListVelocity = function () {\n        var _this = this;\n        return this.current.map(function (c, i) {\n            return _this.getSingleVelocity(c, _this.prev[i]);\n        });\n    };\n    ValueReaction.prototype.getMapVelocity = function () {\n        var velocity = {};\n        for (var key in this.current) {\n            if (this.current.hasOwnProperty(key)) {\n                velocity[key] = this.getSingleVelocity(this.current[key], this.prev[key]);\n            }\n        }\n        return velocity;\n    };\n    return ValueReaction;\n}(BaseMulticast);\nvar value = function (value, initialSubscription) {\n    return new ValueReaction({ value: value, initialSubscription: initialSubscription });\n};\n\nvar multi = function (_a) {\n    var getCount = _a.getCount,\n        getFirst = _a.getFirst,\n        getOutput = _a.getOutput,\n        mapApi = _a.mapApi,\n        setProp = _a.setProp,\n        startActions = _a.startActions;\n    return function (actions) {\n        return action(function (_a) {\n            var update = _a.update,\n                complete = _a.complete,\n                error = _a.error;\n            var numActions = getCount(actions);\n            var output = getOutput();\n            var updateOutput = function () {\n                return update(output);\n            };\n            var numCompletedActions = 0;\n            var subs = startActions(actions, function (a, name) {\n                var hasCompleted = false;\n                return a.start({\n                    complete: function () {\n                        if (!hasCompleted) {\n                            hasCompleted = true;\n                            numCompletedActions++;\n                            if (numCompletedActions === numActions) sync.update(complete);\n                        }\n                    },\n                    error: error,\n                    update: function (v) {\n                        setProp(output, name, v);\n                        sync.update(updateOutput, false, true);\n                    }\n                });\n            });\n            return Object.keys(getFirst(subs)).reduce(function (api, methodName) {\n                api[methodName] = mapApi(subs, methodName);\n                return api;\n            }, {});\n        });\n    };\n};\n\nvar composite = /*#__PURE__*/multi({\n    getOutput: function () {\n        return {};\n    },\n    getCount: function (subs) {\n        return Object.keys(subs).length;\n    },\n    getFirst: function (subs) {\n        return subs[Object.keys(subs)[0]];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return Object.keys(subs).reduce(function (output, propKey) {\n                var _a;\n                if (subs[propKey][methodName]) {\n                    args[0] && args[0][propKey] !== undefined ? output[propKey] = subs[propKey][methodName](args[0][propKey]) : output[propKey] = (_a = subs[propKey])[methodName].apply(_a, args);\n                }\n                return output;\n            }, {});\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return Object.keys(actions).reduce(function (subs, key) {\n            subs[key] = starter(actions[key], key);\n            return subs;\n        }, {});\n    }\n});\n\nvar parallel = /*#__PURE__*/multi({\n    getOutput: function () {\n        return [];\n    },\n    getCount: function (subs) {\n        return subs.length;\n    },\n    getFirst: function (subs) {\n        return subs[0];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return subs.map(function (sub, i) {\n                if (sub[methodName]) {\n                    return Array.isArray(args[0]) ? sub[methodName](args[0][i]) : sub[methodName].apply(sub, args);\n                }\n            });\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return actions.map(function (action, i) {\n            return starter(action, i);\n        });\n    }\n});\nvar parallel$1 = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return parallel(actions);\n};\n\nvar createVectorTests = function (typeTests) {\n    var testNames = Object.keys(typeTests);\n    var isVectorProp = function (prop, key) {\n        return prop !== undefined && !typeTests[key](prop);\n    };\n    var getVectorKeys = function (props) {\n        return testNames.reduce(function (vectorKeys, key) {\n            if (isVectorProp(props[key], key)) vectorKeys.push(key);\n            return vectorKeys;\n        }, []);\n    };\n    var testVectorProps = function (props) {\n        return props && testNames.some(function (key) {\n            return isVectorProp(props[key], key);\n        });\n    };\n    return { getVectorKeys: getVectorKeys, testVectorProps: testVectorProps };\n};\nvar unitTypes = [px, percent, degrees, vh, vw];\nvar findUnitType = function (prop) {\n    return unitTypes.find(function (type) {\n        return type.test(prop);\n    });\n};\nvar isUnitProp = function (prop) {\n    return Boolean(findUnitType(prop));\n};\nvar createAction = function (action, props) {\n    return action(props);\n};\nvar reduceArrayValue = function (i) {\n    return function (props, key) {\n        props[key] = props[key][i];\n        return props;\n    };\n};\nvar createArrayAction = function (action, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionList = props[firstVectorKey].map(function (v, i) {\n        var childActionProps = vectorKeys.reduce(reduceArrayValue(i), __assign({}, props));\n        return getActionCreator(v)(action, childActionProps);\n    });\n    return parallel$1.apply(void 0, actionList);\n};\nvar reduceObjectValue = function (key) {\n    return function (props, propKey) {\n        props[propKey] = props[propKey][key];\n        return props;\n    };\n};\nvar createObjectAction = function (action, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionMap = Object.keys(props[firstVectorKey]).reduce(function (map, key) {\n        var childActionProps = vectorKeys.reduce(reduceObjectValue(key), __assign({}, props));\n        map[key] = getActionCreator(props[firstVectorKey][key])(action, childActionProps);\n        return map;\n    }, {});\n    return composite(actionMap);\n};\nvar createUnitAction = function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n    var unitType = findUnitType(from) || findUnitType(to);\n    var transform = unitType.transform,\n        parse = unitType.parse;\n    return action(__assign(__assign({}, props), { from: typeof from === 'string' ? parse(from) : from, to: typeof to === 'string' ? parse(to) : to })).pipe(transform);\n};\nvar createMixerAction = function (mixer) {\n    return function (action, _a) {\n        var from = _a.from,\n            to = _a.to,\n            props = __rest(_a, [\"from\", \"to\"]);\n        return action(__assign(__assign({}, props), { from: 0, to: 1 })).pipe(mixer(from, to));\n    };\n};\nvar createColorAction = /*#__PURE__*/createMixerAction(mixColor);\nvar createComplexAction = /*#__PURE__*/createMixerAction(mixComplex);\nvar createVectorAction = function (action, typeTests) {\n    var _a = createVectorTests(typeTests),\n        testVectorProps = _a.testVectorProps,\n        getVectorKeys = _a.getVectorKeys;\n    var vectorAction = function (props) {\n        var isVector = testVectorProps(props);\n        if (!isVector) return action(props);\n        var vectorKeys = getVectorKeys(props);\n        var testKey = vectorKeys[0];\n        var testProp = props[testKey];\n        return getActionCreator(testProp)(action, props, vectorKeys);\n    };\n    return vectorAction;\n};\nvar getActionCreator = function (prop) {\n    if (typeof prop === 'number') {\n        return createAction;\n    } else if (Array.isArray(prop)) {\n        return createArrayAction;\n    } else if (isUnitProp(prop)) {\n        return createUnitAction;\n    } else if (color.test(prop)) {\n        return createColorAction;\n    } else if (complex.test(prop)) {\n        return createComplexAction;\n    } else if (typeof prop === 'object') {\n        return createObjectAction;\n    } else {\n        return createAction;\n    }\n};\n\nvar decay = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0 : _b,\n            _c = props.from,\n            from = _c === void 0 ? 0 : _c,\n            _d = props.power,\n            power = _d === void 0 ? 0.8 : _d,\n            _e = props.timeConstant,\n            timeConstant = _e === void 0 ? 350 : _e,\n            _f = props.restDelta,\n            restDelta = _f === void 0 ? 0.5 : _f,\n            modifyTarget = props.modifyTarget;\n        var elapsed = 0;\n        var amplitude = power * velocity;\n        var idealTarget = from + amplitude;\n        var target = typeof modifyTarget === 'undefined' ? idealTarget : modifyTarget(idealTarget);\n        if (target !== idealTarget) amplitude = target - from;\n        var process = sync.update(function (_a) {\n            var frameDelta = _a.delta;\n            elapsed += frameDelta;\n            var delta = -amplitude * Math.exp(-elapsed / timeConstant);\n            var isMoving = delta > restDelta || delta < -restDelta;\n            var current = isMoving ? target + delta : target;\n            update(current);\n            if (!isMoving) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorDecay = /*#__PURE__*/createVectorAction(decay, {\n    from: number.test,\n    modifyTarget: function (func) {\n        return typeof func === 'function';\n    },\n    velocity: number.test\n});\n\nvar spring = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0.0 : _b;\n        var _c = props.from,\n            from = _c === void 0 ? 0.0 : _c,\n            _d = props.to,\n            to = _d === void 0 ? 0.0 : _d,\n            _e = props.stiffness,\n            stiffness = _e === void 0 ? 100 : _e,\n            _f = props.damping,\n            damping = _f === void 0 ? 10 : _f,\n            _g = props.mass,\n            mass = _g === void 0 ? 1.0 : _g,\n            _h = props.restSpeed,\n            restSpeed = _h === void 0 ? 0.01 : _h,\n            _j = props.restDelta,\n            restDelta = _j === void 0 ? 0.01 : _j;\n        var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n        var t = 0;\n        var delta = to - from;\n        var position = from;\n        var prevPosition = position;\n        var process = sync.update(function (_a) {\n            var timeDelta = _a.delta;\n            t += timeDelta;\n            var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n            var angularFreq = Math.sqrt(stiffness / mass) / 1000;\n            prevPosition = position;\n            if (dampingRatio < 1) {\n                var envelope = Math.exp(-dampingRatio * angularFreq * t);\n                var expoDecay = angularFreq * Math.sqrt(1.0 - dampingRatio * dampingRatio);\n                position = to - envelope * ((initialVelocity + dampingRatio * angularFreq * delta) / expoDecay * Math.sin(expoDecay * t) + delta * Math.cos(expoDecay * t));\n            } else {\n                var envelope = Math.exp(-angularFreq * t);\n                position = to - envelope * (delta + (initialVelocity + angularFreq * delta) * t);\n            }\n            velocity = velocityPerSecond(position - prevPosition, timeDelta);\n            var isBelowVelocityThreshold = Math.abs(velocity) <= restSpeed;\n            var isBelowDisplacementThreshold = Math.abs(to - position) <= restDelta;\n            if (isBelowVelocityThreshold && isBelowDisplacementThreshold) {\n                position = to;\n                update(position);\n                cancelSync.update(process);\n                complete();\n            } else {\n                update(position);\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorSpring = /*#__PURE__*/createVectorAction(spring, {\n    from: number.test,\n    to: number.test,\n    stiffness: number.test,\n    damping: number.test,\n    mass: number.test,\n    velocity: number.test\n});\n\nvar inertia = function (_a) {\n    var _b = _a.from,\n        from = _b === void 0 ? 0 : _b,\n        _c = _a.velocity,\n        velocity = _c === void 0 ? 0 : _c,\n        min = _a.min,\n        max = _a.max,\n        _d = _a.power,\n        power = _d === void 0 ? 0.8 : _d,\n        _e = _a.timeConstant,\n        timeConstant = _e === void 0 ? 700 : _e,\n        _f = _a.bounceStiffness,\n        bounceStiffness = _f === void 0 ? 500 : _f,\n        _g = _a.bounceDamping,\n        bounceDamping = _g === void 0 ? 10 : _g,\n        _h = _a.restDelta,\n        restDelta = _h === void 0 ? 1 : _h,\n        modifyTarget = _a.modifyTarget;\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var prev = from;\n        var current = from;\n        var activeAnimation;\n        var isOutOfBounds = function (v) {\n            return min !== undefined && v < min || max !== undefined && v > max;\n        };\n        var boundaryNearest = function (v) {\n            return Math.abs(min - v) < Math.abs(max - v) ? min : max;\n        };\n        var startAnimation = function (animation, next) {\n            activeAnimation && activeAnimation.stop();\n            activeAnimation = animation.start({\n                update: update,\n                complete: function () {\n                    if (next) {\n                        next();\n                        return;\n                    }\n                    complete();\n                }\n            });\n        };\n        var startSpring = function (props) {\n            startAnimation(spring(__assign(__assign({}, props), { stiffness: bounceStiffness, damping: bounceDamping, restDelta: restDelta })));\n        };\n        if (isOutOfBounds(from)) {\n            startSpring({ from: from, velocity: velocity, to: boundaryNearest(from) });\n        } else {\n            var to = power * velocity + from;\n            if (typeof modifyTarget !== 'undefined') {\n                to = modifyTarget(to);\n                modifyTarget = void 0;\n                velocity = (to - from) / power;\n            }\n            var animation = decay({\n                from: from,\n                velocity: velocity,\n                timeConstant: timeConstant,\n                power: power,\n                restDelta: restDelta,\n                modifyTarget: modifyTarget\n            });\n            var next = void 0;\n            if (isOutOfBounds(to)) {\n                var boundary_1 = boundaryNearest(to);\n                var heading_1 = boundary_1 == min ? -1 : 1;\n                animation = animation.while(function (v) {\n                    prev = current;\n                    velocity = velocityPerSecond(v - prev, getFrameData().delta);\n                    current = v;\n                    return boundary_1 - v * heading_1 > 0;\n                });\n                next = function () {\n                    return startSpring({ from: current, to: boundary_1, velocity: velocity });\n                };\n            }\n            startAnimation(animation, next);\n        }\n        return {\n            stop: function () {\n                return activeAnimation && activeAnimation.stop();\n            }\n        };\n    });\n};\nvar index = /*#__PURE__*/createVectorAction(inertia, {\n    from: number.test,\n    velocity: number.test,\n    min: number.test,\n    max: number.test,\n    damping: number.test,\n    stiffness: number.test,\n    modifyTarget: function (func) {\n        return typeof func === 'function';\n    }\n});\n\nvar frame = function () {\n    return action(function (_a) {\n        var update = _a.update;\n        var initialTime = 0;\n        var process = sync.update(function (_a) {\n            var timestamp = _a.timestamp;\n            if (!initialTime) initialTime = timestamp;\n            update(timestamp - initialTime);\n        }, true, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\n\nvar scrubber = function (_a) {\n    var _b = _a.from,\n        from = _b === void 0 ? 0 : _b,\n        _c = _a.to,\n        to = _c === void 0 ? 1 : _c,\n        _d = _a.ease,\n        ease = _d === void 0 ? linear : _d,\n        _e = _a.reverseEase,\n        reverseEase = _e === void 0 ? false : _e;\n    if (reverseEase) {\n        ease = createReversedEasing(ease);\n    }\n    return action(function (_a) {\n        var update = _a.update;\n        return {\n            seek: function (progress) {\n                return update(progress);\n            }\n        };\n    }).pipe(ease, function (v) {\n        return mix(from, to, v);\n    });\n};\nvar vectorScrubber = /*#__PURE__*/createVectorAction(scrubber, {\n    ease: function (func) {\n        return typeof func === 'function';\n    },\n    from: number.test,\n    to: number.test\n});\n\nvar clampProgress = /*#__PURE__*/clamp(0, 1);\nvar tween = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.duration,\n            duration = _b === void 0 ? 300 : _b,\n            _c = props.ease,\n            ease = _c === void 0 ? easeOut : _c,\n            _d = props.flip,\n            flip = _d === void 0 ? 0 : _d,\n            _e = props.loop,\n            loop = _e === void 0 ? 0 : _e,\n            _f = props.yoyo,\n            yoyo = _f === void 0 ? 0 : _f,\n            _g = props.repeatDelay,\n            repeatDelay = _g === void 0 ? 0 : _g;\n        var _h = props.from,\n            from = _h === void 0 ? 0 : _h,\n            _j = props.to,\n            to = _j === void 0 ? 1 : _j,\n            _k = props.elapsed,\n            elapsed = _k === void 0 ? 0 : _k,\n            _l = props.flipCount,\n            flipCount = _l === void 0 ? 0 : _l,\n            _m = props.yoyoCount,\n            yoyoCount = _m === void 0 ? 0 : _m,\n            _o = props.loopCount,\n            loopCount = _o === void 0 ? 0 : _o;\n        var playhead = vectorScrubber({ from: from, to: to, ease: ease }).start(update);\n        var currentProgress = 0;\n        var process;\n        var isActive = false;\n        var reverseAnimation = function (reverseEase) {\n            var _a;\n            if (reverseEase === void 0) {\n                reverseEase = false;\n            }\n            _a = [to, from], from = _a[0], to = _a[1];\n            playhead = vectorScrubber({ from: from, to: to, ease: ease, reverseEase: reverseEase }).start(update);\n        };\n        var isTweenComplete = function () {\n            var isComplete = isActive && elapsed > duration + repeatDelay;\n            if (!isComplete) return false;\n            if (isComplete && !loop && !flip && !yoyo) return true;\n            elapsed = duration - (elapsed - repeatDelay);\n            if (loop && loopCount < loop) {\n                loopCount++;\n                return false;\n            } else if (flip && flipCount < flip) {\n                flipCount++;\n                reverseAnimation();\n                return false;\n            } else if (yoyo && yoyoCount < yoyo) {\n                yoyoCount++;\n                reverseAnimation(yoyoCount % 2 !== 0);\n                return false;\n            }\n            return true;\n        };\n        var updateTween = function () {\n            currentProgress = clampProgress(progress(0, duration, elapsed));\n            playhead.seek(currentProgress);\n        };\n        var startTimer = function () {\n            isActive = true;\n            process = sync.update(function (_a) {\n                var delta = _a.delta;\n                elapsed += delta;\n                updateTween();\n                if (isTweenComplete()) {\n                    cancelSync.update(process);\n                    complete && sync.update(complete, false, true);\n                }\n            }, true);\n        };\n        var stopTimer = function () {\n            isActive = false;\n            if (process) cancelSync.update(process);\n        };\n        startTimer();\n        return {\n            isActive: function () {\n                return isActive;\n            },\n            getElapsed: function () {\n                return clamp(0, duration, elapsed);\n            },\n            getProgress: function () {\n                return currentProgress;\n            },\n            stop: function () {\n                stopTimer();\n            },\n            pause: function () {\n                stopTimer();\n                return this;\n            },\n            resume: function () {\n                if (!isActive) startTimer();\n                return this;\n            },\n            seek: function (newProgress) {\n                elapsed = mix(0, duration, newProgress);\n                sync.update(updateTween, false, true);\n                return this;\n            },\n            reverse: function () {\n                reverseAnimation();\n                return this;\n            }\n        };\n    });\n};\n\nvar clampProgress$1 = /*#__PURE__*/clamp(0, 1);\nvar defaultEasings = function (values, easing) {\n    return values.map(function () {\n        return easing || easeOut;\n    }).splice(0, values.length - 1);\n};\nvar defaultTimings = function (values) {\n    var numValues = values.length;\n    return values.map(function (value, i) {\n        return i !== 0 ? i / (numValues - 1) : 0;\n    });\n};\nvar interpolateScrubbers = function (input, scrubbers, update) {\n    var rangeLength = input.length;\n    var finalInputIndex = rangeLength - 1;\n    var finalScrubberIndex = finalInputIndex - 1;\n    var subs = scrubbers.map(function (scrub) {\n        return scrub.start(update);\n    });\n    return function (v) {\n        if (v <= input[0]) {\n            subs[0].seek(0);\n        }\n        if (v >= input[finalInputIndex]) {\n            subs[finalScrubberIndex].seek(1);\n        }\n        var i = 1;\n        for (; i < rangeLength; i++) {\n            if (input[i] > v || i === finalInputIndex) break;\n        }\n        var progressInRange = progress(input[i - 1], input[i], v);\n        subs[i - 1].seek(clampProgress$1(progressInRange));\n    };\n};\nvar keyframes = function (_a) {\n    var easings = _a.easings,\n        _b = _a.ease,\n        ease = _b === void 0 ? linear : _b,\n        times = _a.times,\n        values = _a.values,\n        tweenProps = __rest(_a, [\"easings\", \"ease\", \"times\", \"values\"]);\n    easings = Array.isArray(easings) ? easings : defaultEasings(values, easings);\n    times = times || defaultTimings(values);\n    var scrubbers = easings.map(function (easing, i) {\n        return vectorScrubber({\n            from: values[i],\n            to: values[i + 1],\n            ease: easing\n        });\n    });\n    return tween(__assign(__assign({}, tweenProps), { ease: ease })).applyMiddleware(function (update) {\n        return interpolateScrubbers(times, scrubbers, update);\n    });\n};\n\nvar physics = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.acceleration,\n            acceleration = _b === void 0 ? 0 : _b,\n            _c = props.friction,\n            friction = _c === void 0 ? 0 : _c,\n            _d = props.velocity,\n            velocity = _d === void 0 ? 0 : _d,\n            springStrength = props.springStrength,\n            to = props.to;\n        var _e = props.restSpeed,\n            restSpeed = _e === void 0 ? 0.001 : _e,\n            _f = props.from,\n            from = _f === void 0 ? 0 : _f;\n        var current = from;\n        var process = sync.update(function (_a) {\n            var delta = _a.delta;\n            var elapsed = Math.max(delta, 16);\n            if (acceleration) velocity += velocityPerFrame(acceleration, elapsed);\n            if (friction) velocity *= Math.pow(1 - friction, elapsed / 100);\n            if (springStrength !== undefined && to !== undefined) {\n                var distanceToTarget = to - current;\n                velocity += distanceToTarget * velocityPerFrame(springStrength, elapsed);\n            }\n            current += velocityPerFrame(velocity, elapsed);\n            update(current);\n            var isComplete = restSpeed !== false && (!velocity || Math.abs(velocity) <= restSpeed);\n            if (isComplete) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            set: function (v) {\n                current = v;\n                return this;\n            },\n            setAcceleration: function (v) {\n                acceleration = v;\n                return this;\n            },\n            setFriction: function (v) {\n                friction = v;\n                return this;\n            },\n            setSpringStrength: function (v) {\n                springStrength = v;\n                return this;\n            },\n            setSpringTarget: function (v) {\n                to = v;\n                return this;\n            },\n            setVelocity: function (v) {\n                velocity = v;\n                return this;\n            },\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorPhysics = /*#__PURE__*/createVectorAction(physics, {\n    acceleration: number.test,\n    friction: number.test,\n    velocity: number.test,\n    from: number.test,\n    to: number.test,\n    springStrength: number.test\n});\n\nvar DEFAULT_DURATION = 300;\nvar flattenTimings = function (instructions) {\n    var flatInstructions = [];\n    var lastArg = instructions[instructions.length - 1];\n    var isStaggered = typeof lastArg === 'number';\n    var staggerDelay = isStaggered ? lastArg : 0;\n    var segments = isStaggered ? instructions.slice(0, -1) : instructions;\n    var numSegments = segments.length;\n    var offset = 0;\n    segments.forEach(function (item, i) {\n        flatInstructions.push(item);\n        if (i !== numSegments - 1) {\n            var duration = item.duration || DEFAULT_DURATION;\n            offset = staggerDelay;\n            flatInstructions.push(\"\" + (offset - duration));\n        }\n    });\n    return flatInstructions;\n};\nvar flattenArrayInstructions = function (instructions, instruction) {\n    Array.isArray(instruction) ? instructions.push.apply(instructions, flattenTimings(instruction)) : instructions.push(instruction);\n    return instructions;\n};\nvar convertDefToProps = function (props, def, i) {\n    var duration = props.duration,\n        easings = props.easings,\n        times = props.times,\n        values = props.values;\n    var numValues = values.length;\n    var prevTimeTo = times[numValues - 1];\n    var timeFrom = def.at === 0 ? 0 : def.at / duration;\n    var timeTo = (def.at + def.duration) / duration;\n    if (i === 0) {\n        values.push(def.from);\n        times.push(timeFrom);\n    } else {\n        if (prevTimeTo !== timeFrom) {\n            if (def.from !== undefined) {\n                values.push(values[numValues - 1]);\n                times.push(timeFrom);\n                easings.push(linear);\n            }\n            var from = def.from !== undefined ? def.from : values[numValues - 1];\n            values.push(from);\n            times.push(timeFrom);\n            easings.push(linear);\n        } else if (def.from !== undefined) {\n            values.push(def.from);\n            times.push(timeFrom);\n            easings.push(linear);\n        }\n    }\n    values.push(def.to);\n    times.push(timeTo);\n    easings.push(def.ease || easeInOut);\n    return props;\n};\nvar timeline = function (instructions, _a) {\n    var _b = _a === void 0 ? {} : _a,\n        duration = _b.duration,\n        elapsed = _b.elapsed,\n        ease = _b.ease,\n        loop = _b.loop,\n        flip = _b.flip,\n        yoyo = _b.yoyo;\n    var playhead = 0;\n    var calculatedDuration = 0;\n    var flatInstructions = instructions.reduce(flattenArrayInstructions, []);\n    var animationDefs = [];\n    flatInstructions.forEach(function (instruction) {\n        if (typeof instruction === 'string') {\n            playhead += parseFloat(instruction);\n        } else if (typeof instruction === 'number') {\n            playhead = instruction;\n        } else {\n            var def = __assign(__assign({}, instruction), { at: playhead });\n            def.duration = def.duration === undefined ? DEFAULT_DURATION : def.duration;\n            animationDefs.push(def);\n            playhead += def.duration;\n            calculatedDuration = Math.max(calculatedDuration, def.at + def.duration);\n        }\n    });\n    var tracks = {};\n    var numDefs = animationDefs.length;\n    for (var i = 0; i < numDefs; i++) {\n        var def = animationDefs[i];\n        var track = def.track;\n        if (track === undefined) {\n            throw new Error('No track defined');\n        }\n        if (!tracks.hasOwnProperty(track)) tracks[track] = [];\n        tracks[track].push(def);\n    }\n    var trackKeyframes = {};\n    for (var key in tracks) {\n        if (tracks.hasOwnProperty(key)) {\n            var keyframeProps = tracks[key].reduce(convertDefToProps, {\n                duration: calculatedDuration,\n                easings: [],\n                times: [],\n                values: []\n            });\n            trackKeyframes[key] = keyframes(__assign(__assign({}, keyframeProps), { duration: duration || calculatedDuration, ease: ease,\n                elapsed: elapsed,\n                loop: loop,\n                yoyo: yoyo,\n                flip: flip }));\n        }\n    }\n    return composite(trackKeyframes);\n};\n\nvar listen = function (element, events, options) {\n    return action(function (_a) {\n        var update = _a.update;\n        var eventNames = events.split(' ').map(function (eventName) {\n            element.addEventListener(eventName, update, options);\n            return eventName;\n        });\n        return {\n            stop: function () {\n                return eventNames.forEach(function (eventName) {\n                    return element.removeEventListener(eventName, update, options);\n                });\n            }\n        };\n    });\n};\n\nvar defaultPointerPos = function () {\n    return {\n        clientX: 0,\n        clientY: 0,\n        pageX: 0,\n        pageY: 0,\n        x: 0,\n        y: 0\n    };\n};\nvar eventToPoint = function (e, point) {\n    if (point === void 0) {\n        point = defaultPointerPos();\n    }\n    point.clientX = point.x = e.clientX;\n    point.clientY = point.y = e.clientY;\n    point.pageX = e.pageX;\n    point.pageY = e.pageY;\n    return point;\n};\n\nvar points = [/*#__PURE__*/defaultPointerPos()];\nvar isTouchDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointsLocation = function (_a) {\n        var touches = _a.touches;\n        isTouchDevice = true;\n        var numTouches = touches.length;\n        points.length = 0;\n        for (var i = 0; i < numTouches; i++) {\n            var thisTouch = touches[i];\n            points.push(eventToPoint(thisTouch));\n        }\n    };\n    listen(document, 'touchstart touchmove', {\n        passive: true,\n        capture: true\n    }).start(updatePointsLocation);\n}\nvar multitouch = function (_a) {\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.preventDefault,\n        preventDefault = _c === void 0 ? true : _c,\n        _d = _b.scale,\n        scale = _d === void 0 ? 1.0 : _d,\n        _e = _b.rotate,\n        rotate = _e === void 0 ? 0.0 : _e;\n    return action(function (_a) {\n        var update = _a.update;\n        var output = {\n            touches: points,\n            scale: scale,\n            rotate: rotate\n        };\n        var initialDistance = 0.0;\n        var initialRotation = 0.0;\n        var isGesture = points.length > 1;\n        if (isGesture) {\n            var firstTouch = points[0],\n                secondTouch = points[1];\n            initialDistance = distance(firstTouch, secondTouch);\n            initialRotation = angle(firstTouch, secondTouch);\n        }\n        var updatePoint = function () {\n            if (isGesture) {\n                var firstTouch = points[0],\n                    secondTouch = points[1];\n                var newDistance = distance(firstTouch, secondTouch);\n                var newRotation = angle(firstTouch, secondTouch);\n                output.scale = scale * (newDistance / initialDistance);\n                output.rotate = rotate + (newRotation - initialRotation);\n            }\n            update(output);\n        };\n        var onMove = function (e) {\n            if (preventDefault || e.touches.length > 1) e.preventDefault();\n            sync.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'touchmove', {\n            passive: !preventDefault\n        }).start(onMove);\n        if (isTouchDevice) sync.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\nvar getIsTouchDevice = function () {\n    return isTouchDevice;\n};\n\nvar point = /*#__PURE__*/defaultPointerPos();\nvar isMouseDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointLocation = function (e) {\n        isMouseDevice = true;\n        eventToPoint(e, point);\n    };\n    listen(document, 'mousedown mousemove', true).start(updatePointLocation);\n}\nvar mouse = function (_a) {\n    var _b = (_a === void 0 ? {} : _a).preventDefault,\n        preventDefault = _b === void 0 ? true : _b;\n    return action(function (_a) {\n        var update = _a.update;\n        var updatePoint = function () {\n            return update(point);\n        };\n        var onMove = function (e) {\n            if (preventDefault) e.preventDefault();\n            sync.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'mousemove').start(onMove);\n        if (isMouseDevice) sync.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\n\nvar getFirstTouch = function (_a) {\n    var firstTouch = _a[0];\n    return firstTouch;\n};\nvar pointer = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return getIsTouchDevice() ? multitouch(props).pipe(function (_a) {\n        var touches = _a.touches;\n        return touches;\n    }, getFirstTouch) : mouse(props);\n};\nvar index$1 = function (_a) {\n    if (_a === void 0) {\n        _a = {};\n    }\n    var x = _a.x,\n        y = _a.y,\n        props = __rest(_a, [\"x\", \"y\"]);\n    if (x !== undefined || y !== undefined) {\n        var applyXOffset_1 = applyOffset(x || 0);\n        var applyYOffset_1 = applyOffset(y || 0);\n        var delta_1 = { x: 0, y: 0 };\n        return pointer(props).pipe(function (point) {\n            delta_1.x = applyXOffset_1(point.x);\n            delta_1.y = applyYOffset_1(point.y);\n            return delta_1;\n        });\n    } else {\n        return pointer(props);\n    }\n};\n\nvar chain = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var i = 0;\n        var current;\n        var playCurrent = function () {\n            current = actions[i].start({\n                complete: function () {\n                    i++;\n                    i >= actions.length ? complete() : playCurrent();\n                },\n                update: update\n            });\n        };\n        playCurrent();\n        return {\n            stop: function () {\n                return current && current.stop();\n            }\n        };\n    });\n};\n\nvar crossfade = function (a, b) {\n    return action(function (observer) {\n        var balance = 0;\n        var fadable = parallel$1(a, b).start(__assign(__assign({}, observer), { update: function (_a) {\n                var va = _a[0],\n                    vb = _a[1];\n                observer.update(mix(va, vb, balance));\n            } }));\n        return {\n            setBalance: function (v) {\n                return balance = v;\n            },\n            stop: function () {\n                return fadable.stop();\n            }\n        };\n    });\n};\n\nvar delay = function (timeToDelay) {\n    return action(function (_a) {\n        var complete = _a.complete;\n        var timeout = setTimeout(complete, timeToDelay);\n        return {\n            stop: function () {\n                return clearTimeout(timeout);\n            }\n        };\n    });\n};\n\nvar merge = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return action(function (observer) {\n        var subs = actions.map(function (thisAction) {\n            return thisAction.start(observer);\n        });\n        return {\n            stop: function () {\n                return subs.forEach(function (sub) {\n                    return sub.stop();\n                });\n            }\n        };\n    });\n};\n\nvar schedule = function (scheduler, schedulee) {\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var latest;\n        var schedulerSub = scheduler.start({\n            update: function () {\n                return latest !== undefined && update(latest);\n            },\n            complete: complete\n        });\n        var scheduleeSub = schedulee.start({\n            update: function (v) {\n                return latest = v;\n            },\n            complete: complete\n        });\n        return {\n            stop: function () {\n                schedulerSub.stop();\n                scheduleeSub.stop();\n            }\n        };\n    });\n};\n\nvar stagger = function (actions, interval) {\n    var intervalIsNumber = typeof interval === 'number';\n    var actionsWithDelay = actions.map(function (a, i) {\n        var timeToDelay = intervalIsNumber ? interval * i : interval(i);\n        return chain(delay(timeToDelay), a);\n    });\n    return parallel$1.apply(void 0, actionsWithDelay);\n};\n\nvar appendUnit = function (unit) {\n    return function (v) {\n        return \"\" + v + unit;\n    };\n};\nvar steps = function (st, min, max) {\n    if (min === void 0) {\n        min = 0;\n    }\n    if (max === void 0) {\n        max = 1;\n    }\n    return function (v) {\n        var current = progress(min, max, v);\n        return mix(min, max, stepProgress(st, current));\n    };\n};\nvar transformMap = function (childTransformers) {\n    return function (v) {\n        var output = __assign({}, v);\n        for (var key in childTransformers) {\n            if (childTransformers.hasOwnProperty(key)) {\n                var childTransformer = childTransformers[key];\n                output[key] = childTransformer(v[key]);\n            }\n        }\n        return output;\n    };\n};\n\nvar transformers = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    applyOffset: applyOffset,\n    clamp: clamp,\n    conditional: conditional,\n    interpolate: interpolate,\n    blendArray: mixArray,\n    blendColor: mixColor,\n    pipe: pipe,\n    smooth: smooth,\n    snap: snap,\n    generateStaticSpring: springForce,\n    nonlinearSpring: springForceExpo,\n    linearSpring: springForceLinear,\n    wrap: wrap,\n    appendUnit: appendUnit,\n    steps: steps,\n    transformMap: transformMap\n});\n\nvar css = function (element, props) {\n    warning(false, 'css() is deprecated, use styler instead');\n    return styler(element, props);\n};\nvar svg = function (element, props) {\n    warning(false, 'svg() is deprecated, use styler instead');\n    return styler(element, props);\n};\n\nexport { Action, ValueReaction, action, calc, chain, composite, crossfade, css, vectorDecay as decay, delay, frame as everyFrame, index as inertia, keyframes, listen, merge, mouse, multicast, multitouch, parallel$1 as parallel, vectorPhysics as physics, index$1 as pointer, schedule, vectorSpring as spring, stagger, svg, timeline, transformers as transform, tween, value };\n"]},"metadata":{},"sourceType":"module"}